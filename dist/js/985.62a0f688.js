"use strict";(self["webpackChunkwpa_gereco"]=self["webpackChunkwpa_gereco"]||[]).push([[985],{6985:function(t,e,n){n.r(e),n.d(e,{default:function(){return rt}});var l=n(3396);const a={class:"VH"};function r(t,e,n,r,i,o){const s=(0,l.up)("VH");return(0,l.wg)(),(0,l.iD)("div",a,[(0,l.Wm)(s,{msg:"Welcome to Your Vue.js App"})])}var i=n(9242),o=n(7139),s=n(3630),_=n(2957);const d=t=>((0,l.dD)("data-v-4bfd5766"),t=t(),(0,l.Cn)(),t),u={class:"form_header"},m=(0,l.uE)('<div class="header_headline" data-v-4bfd5766><a href="/" data-v-4bfd5766><img class="return_button" src="'+s+'" data-v-4bfd5766></a><img src="'+_+'" data-v-4bfd5766></div><div style="font-size:19px;color:white;font-weight:bold;" data-v-4bfd5766>VISITE HEBDOMADAIRE</div>',2),p={style:{"font-size":"14px",color:"white","font-weight":"bold","margin-bottom":"20px"}},c={class:"form_bloc"},h=d((()=>(0,l._)("div",{class:"form_bloc_title"},"Contrat",-1))),v={class:"form_bloc_content"},b=d((()=>(0,l._)("div",{class:"col"},[(0,l._)("div",{class:"form_bloc_subtitle"},"Référence"),(0,l._)("div",null,"14/0712")],-1))),f={class:"col"},w=d((()=>(0,l._)("br",null,null,-1))),g={class:"form_bloc_content table_container"},V=d((()=>(0,l._)("tr",null,[(0,l._)("th",null,"Nb Logt"),(0,l._)("th",null,"Nb Ch."),(0,l._)("th",null,"Nb WC comm."),(0,l._)("th",null,"Nb loc. comm.")],-1))),y={class:"form_bloc_content table_container"},I=d((()=>(0,l._)("div",{class:"form_bloc_title"},"Gardien",-1))),x={class:"recur_table"},D=d((()=>(0,l._)("tr",null,[(0,l._)("th",null,"Nom"),(0,l._)("th",null,"Adresse loge"),(0,l._)("th",null,"Code"),(0,l._)("th",null,"Horaire")],-1))),U=d((()=>(0,l._)("tr",null,[(0,l._)("th",null,"Fixe"),(0,l._)("th",null,"Portable")],-1))),H={class:"form_bloc_content table_container"},k=d((()=>(0,l._)("div",{class:"form_bloc_title"},"Syndic / Gérant",-1))),F={class:"recur_table"},q=d((()=>(0,l._)("tr",null,[(0,l._)("th",null,"Nom"),(0,l._)("th",null,"Fixe")],-1))),z={class:"form_bloc_content table_container"},C=d((()=>(0,l._)("div",{class:"form_bloc_title"},"Observations GERECO",-1))),E={class:"form_bloc_content"},N={class:"form_bloc"},L=d((()=>(0,l._)("div",{class:"form_bloc_title"},"Remarques (informations à modifier)",-1))),A={class:"form_bloc_content"},O={class:"form_bloc vg"},R=d((()=>(0,l._)("div",{class:"form_bloc_title"},"Interventions",-1))),S={class:"form_bloc_content table_container"},j=d((()=>(0,l._)("tr",null,[(0,l._)("th",null,"Nom"),(0,l._)("th",null,"Bât."),(0,l._)("th",null,"Esc."),(0,l._)("th",null,"Et."),(0,l._)("th",null,"Pte"),(0,l._)("th",null,"Objet"),(0,l._)("th",null,"Modifier")],-1))),Z=["onUpdate:modelValue","onInput"],M=["onUpdate:modelValue","onInput"],P=["onUpdate:modelValue","onInput"],T=["onUpdate:modelValue","onInput"],W=["onUpdate:modelValue","onInput"],G=["onUpdate:modelValue","onInput"],B={style:{"text-align":"center"}},J=["onClick"],Y=d((()=>(0,l._)("input",{style:{background:"#c2bdb9",width:"70%",border:"1px solid black","margin-bottom":"20px",height:"25px",color:"black"},class:"input_button",type:"submit",value:"TERMINER L'INTERVENTION"},null,-1)));function $(t,e,n,a,r,s){const _=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("form",{onSubmit:e[5]||(e[5]=(0,i.iM)(((...t)=>s.submitForm&&s.submitForm(...t)),["prevent"]))},[(0,l._)("div",u,[m,(0,l._)("div",p,(0,o.zw)(r.resp.Evt_dtDebut),1),(0,l._)("div",c,[h,(0,l._)("div",v,[b,(0,l._)("div",f,[(0,l.Uk)((0,o.zw)(r.resp.Imm_1_adr),1),w,(0,l.Uk)(" "+(0,o.zw)(r.resp.Imm_2_adr),1)])]),(0,l._)("div",g,[(0,l._)("div",null,[(0,l._)("table",null,[V,(0,l._)("tr",null,[(0,l._)("td",null,(0,o.zw)(r.resp.Imm_nbLog),1),(0,l._)("td",null,(0,o.zw)(t.Imm_nbCham),1),(0,l._)("td",null,(0,o.zw)(t.Imm_nbWC),1),(0,l._)("td",null,(0,o.zw)(r.resp.nbLocComm),1)])])])]),(0,l._)("div",y,[I,(0,l._)("div",x,[(0,l._)("table",null,[D,(0,l._)("tr",null,[(0,l._)("td",null,(0,o.zw)(r.resp.gardien_nom),1),(0,l._)("td",null,(0,o.zw)(r.resp.gardien_adresse),1),(0,l._)("td",null,(0,o.zw)(r.resp.gardien_code),1),(0,l._)("td",null,(0,o.zw)(r.resp.gardien_HeuresLoge),1)])]),(0,l._)("table",null,[U,(0,l._)("tr",null,[(0,l._)("td",null,(0,o.zw)(r.resp.gardien_telephone),1),(0,l._)("td",null,(0,o.zw)(r.resp.gardien_mobile),1)])])]),(0,l._)("div",H,[k,(0,l._)("div",F,[(0,l._)("table",null,[q,(0,l._)("tr",null,[(0,l._)("td",null,(0,o.zw)(r.resp.client_raisonSoc),1),(0,l._)("td",null,(0,o.zw)(r.resp.client_tel1),1)])])])]),(0,l._)("div",z,[C,(0,l._)("div",E,[(0,l.wy)((0,l._)("textarea",{disabled:"","onUpdate:modelValue":e[0]||(e[0]=t=>r.resp.VH_remarquePreliminaire=t),onInput:e[1]||(e[1]=e=>s.saveFormData(t.index)),style:{height:"70px"}},null,544),[[i.nr,r.resp.VH_remarquePreliminaire]])])]),(0,l._)("div",N,[L,(0,l._)("div",A,[(0,l.wy)((0,l._)("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>this.remarque=t),onInput:e[3]||(e[3]=e=>s.saveFormData(t.index))},null,544),[[i.nr,this.remarque]])])])])])]),(0,l._)("div",O,[R,(0,l._)("div",S,[(0,l._)("div",null,[(0,l._)("table",null,[j,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.appartements,((t,e)=>((0,l.wg)(),(0,l.iD)("tr",{key:e},[(0,l._)("td",null,[(0,l.wy)((0,l._)("input",{style:{width:"40px"},type:"text","onUpdate:modelValue":e=>t.nom=e,onInput:t=>s.saveFormData(e)},null,40,Z),[[i.nr,t.nom]])]),(0,l._)("td",null,[(0,l.wy)((0,l._)("input",{style:{width:"15px"},type:"text","onUpdate:modelValue":e=>t.bat=e,onInput:t=>s.saveFormData(e)},null,40,M),[[i.nr,t.bat]])]),(0,l._)("td",null,[(0,l.wy)((0,l._)("input",{style:{width:"15px"},type:"text","onUpdate:modelValue":e=>t.escalier=e,onInput:t=>s.saveFormData(e)},null,40,P),[[i.nr,t.escalier]])]),(0,l._)("td",null,[(0,l.wy)((0,l._)("input",{style:{width:"15px"},type:"text","onUpdate:modelValue":e=>t.etage=e,onInput:t=>s.saveFormData(e)},null,40,T),[[i.nr,t.etage]])]),(0,l._)("td",null,[(0,l.wy)((0,l._)("input",{style:{width:"15px"},type:"text","onUpdate:modelValue":e=>t.porte=e,onInput:t=>s.saveFormData(e)},null,40,W),[[i.nr,t.porte]])]),(0,l._)("td",null,[(0,l.wy)((0,l._)("input",{style:{width:"40px"},type:"text","onUpdate:modelValue":e=>t.objet=e,onInput:t=>s.saveFormData(e)},null,40,G),[[i.nr,t.objet]])]),(0,l._)("td",B,[this.vh_id?((0,l.wg)(),(0,l.j4)(_,{key:0,to:{name:"VHInter",params:{id:r.vh_id},query:{vhocc:e+1}}},{default:(0,l.w5)((()=>[(0,l.Uk)("--\x3e")])),_:2},1032,["to"])):(0,l.kq)("",!0)]),(0,l._)("div",{onClick:t=>s.removeLine(e),class:"line_remover"}," x ",8,J)])))),128))]),(0,l._)("button",{onClick:e[4]||(e[4]=(...t)=>s.addItemAppartements&&s.addItemAppartements(...t))},"+")])])]),Y],32)}n(7658);var K=n(9262),Q=n(4311),X={name:"VH",data(){return{vh_id:"",resp:"",remarque:"",inter_option:[],appartements:[{num:"1",nom:"",bat:"",escalier:"",etage:"",porte:"",suivi:"",temps_passe:"",remarque_inter:"",statut:"",checkbox_devis:!1,remarque:"",inter:[{inter_type:"",inter_lieu:"",inter_presta:"",inter_qty:"1"}],verif_ra:!1,verif_rob:!1,verif_wc:!1,verif_gen:!1}]}},mounted(){let t=window.location.href.split("?"),e=t[1].split("&"),n={},l="";e.forEach((function(t){l=t.split("="),2==l.length&&(n[l[0]]=l[1])}));let a=n["item_id"];this.vh_id=a,Q.Z.get(this.currIp+"/mission_vh?item_id="+a).then((t=>{this.resp=t.data,Q.Z.get(this.currIp+"/get_contrat_presta?ctr_id="+this.resp.Ctr_code).then((t=>{this.inter_option=t.data,console.log(this.inter_option),this.getFormData()}))})),window.addEventListener("beforeunload",this.saveFormData)},beforeUnmount(){window.removeEventListener("beforeunload",this.saveFormData)},methods:{async saveFormData(t){t+=1;var e=this.$data,n=JSON.stringify(e);if(n=JSON.parse(n),isNaN(t)){let t=1;while(await(0,K.U2)("VH-"+this.vh_id+"-"+t))await(0,K.IV)("VH-"+this.vh_id+"-"+t),t+=1;t=1;while(n.appartements[t-1])await(0,K.t8)("VH-"+this.vh_id+"-"+t,n.appartements[t-1]),t+=1}else await(0,K.t8)("VH-"+this.vh_id+"-"+t,n.appartements[t-1]);await(0,K.t8)("VH-"+this.vh_id,n)},async getFormData(){let t=1,e=[];if(void 0!==await(0,K.U2)("VH-"+this.vh_id+"-"+t)){while(void 0!==await(0,K.U2)("VH-"+this.vh_id+"-"+t)){let n=await(0,K.U2)("VH-"+this.vh_id+"-"+t);e[t-1]=n,t+=1}this.appartements=e}if(void 0!==await(0,K.U2)("VH-"+this.vh_id)){let t=await(0,K.U2)("VH-"+this.vh_id);this.remarque=t.remarque}this.saveFormData()},removeLine(t){confirm("Voulez-vous supprimer cette ligne ?")&&(this.appartements.splice(t,1),this.saveFormData())},addItemAppartements(){var t=this.appartements[this.appartements.length-1],e=t.num;this.appartements.push({num:Number(e)+1,bat:"",escalier:"",etage:"",porte:"",suivi:"",temps_passe:"",remarque_inter:"",checkbox_cloture:!1,checkbox_suspens:!1,checkbox_devis:!1,remarque:"",inter:[{inter_type:"",inter_lieu:"",inter_presta:"",inter_qty:"1"}],verif_ra:!1,verif_rob:!1,verif_wc:!1,verif_gen:!1}),this.saveFormData()},submitForm(){const t={appartements:this.appartements,vh_id:this.vh_id,ctr_code:this.resp.Ctr_code,ctr_nature:this.resp.Ctr_nature,remarque:this.remarque};console.log(t),Q.Z.post(this.currIp+"/submit_vh",t).then((t=>{console.log(t.data)})),this.$router.push("/")}}},tt=n(89);const et=(0,tt.Z)(X,[["render",$],["__scopeId","data-v-4bfd5766"]]);var nt=et,lt={name:"VHView",components:{VH:nt}};const at=(0,tt.Z)(lt,[["render",r]]);var rt=at},3630:function(t,e,n){t.exports=n.p+"img/fleche2_blanc.dac177de.svg"},2957:function(t,e,n){t.exports=n.p+"img/logo-gereco-2.012b9603.svg"}}]);
//# sourceMappingURL=985.62a0f688.js.map