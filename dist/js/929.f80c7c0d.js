"use strict";(self["webpackChunkwpa_gereco"]=self["webpackChunkwpa_gereco"]||[]).push([[929],{6929:function(e,t,n){n.r(t),n.d(t,{default:function(){return kt}});var a=n(8473);const o={class:"DPForm"};function l(e,t,n,l,i,r){const s=(0,a.up)("DPForm");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(s,{msg:"Welcome to Your Vue.js App"})])}var i=n(9197),r=n(4887),s=n(3630),_=n(2957);const d=e=>((0,a.dD)("data-v-61053d50"),e=e(),(0,a.Cn)(),e),u={class:"form_header"},p={class:"header_headline"},c=d((()=>(0,a._)("a",{href:"/"},[(0,a._)("img",{class:"return_button",src:s})],-1))),m=d((()=>(0,a._)("img",{src:_},null,-1))),v=d((()=>(0,a._)("h2",null,"RA",-1))),h=["value"],b=d((()=>(0,a._)("h2",null,"ROB",-1))),g=["value"],D=d((()=>(0,a._)("h2",null,"WC",-1))),f=["value"],w=d((()=>(0,a._)("h2",null,"Parties communes",-1))),y=["value"],P={style:{"font-size":"19px",color:"white","font-weight":"bold"}},C={style:{"font-size":"14px",color:"white","font-weight":"bold","margin-bottom":"20px"}},x={class:"form_bloc"},I=d((()=>(0,a._)("div",{class:"form_bloc_title"},"Contrat",-1))),F={class:"form_bloc_content"},O={class:"col"},V=d((()=>(0,a._)("div",{class:"form_bloc_subtitle"},"Référence",-1))),k={class:"col"},z=d((()=>(0,a._)("br",null,null,-1))),U={class:"form_bloc"},q=d((()=>(0,a._)("div",{class:"form_bloc_title"},"Code",-1))),E={class:"form_bloc_content"},S={class:"form_bloc"},R=d((()=>(0,a._)("div",{class:"form_bloc_title"},"Ordre",-1))),A={class:"form_bloc_content"},N={class:"col"},B=d((()=>(0,a._)("div",{class:"form_bloc_subtitle"},"Date de l'ordre",-1))),L={class:"col"},M=d((()=>(0,a._)("div",{class:"form_bloc_subtitle"},"Par",-1))),H={class:"form_bloc"},T=d((()=>(0,a._)("div",{class:"form_bloc_title"},"Occupant",-1))),j={class:"form_bloc_content table_container"},W={class:"recur_table"},Y=d((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Nom"),(0,a._)("th",null,"Bât"),(0,a._)("th",null,"Esc")],-1))),G=d((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Et"),(0,a._)("th",null,"Pte"),(0,a._)("th",null,"Code")],-1))),K=d((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Complément adresse"),(0,a._)("th",null,"Fixe"),(0,a._)("th",null,"Bureau"),(0,a._)("th",null,"Portable")],-1))),Z=["checked"],$=d((()=>(0,a._)("label",{for:"blnPresent"},"Présent",-1))),J=["checked"],Q=d((()=>(0,a._)("label",{for:"cleLoge"},"Clé loge",-1))),X={class:"form_bloc"},ee=d((()=>(0,a._)("div",{class:"form_bloc_title"},"Gardien",-1))),te={class:"form_bloc_content table_container"},ne={class:"recur_table"},ae=d((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Nom"),(0,a._)("th",null,"Adresse loge"),(0,a._)("th",null,"Horaire")],-1))),oe=d((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Fixe"),(0,a._)("th",null,"Portable")],-1))),le={class:"form_bloc"},ie=d((()=>(0,a._)("div",{class:"form_bloc_title"},"Syndic/Gérant",-1))),re={class:"form_bloc_content table_container"},se={class:"recur_table"},_e=d((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Nom"),(0,a._)("th",null,"Fixe")],-1))),de={class:"form_bloc"},ue=d((()=>(0,a._)("div",{class:"form_bloc_title"},"Remarques (informations à modifier)",-1))),pe={class:"form_bloc_content"},ce={class:"form_bloc"},me=d((()=>(0,a._)("div",{class:"form_bloc_title"},"Objet de l'intervention",-1))),ve={class:"form_bloc_content"},he={class:"form_bloc"},be=d((()=>(0,a._)("div",{class:"form_bloc_title"},"Remarque préliminaire",-1))),ge={class:"form_bloc_content"},De={class:"form_bloc intervention",style:{"margin-top":"40px"}},fe=d((()=>(0,a._)("div",{class:"form_bloc_title"},"Intervention",-1))),we={class:"form_bloc_content"},ye={class:"intervention_type"},Pe={class:"intervention_bloc"},Ce=d((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Lieu"),(0,a._)("th",null,"Famille"),(0,a._)("th",null,"Presta."),(0,a._)("th",null,"Qté.")],-1))),xe=["onUpdate:modelValue","onChange"],Ie=(0,a.uE)("<option data-v-61053d50></option><option data-v-61053d50>WC</option><option data-v-61053d50>WCLAVEMAIN</option><option data-v-61053d50>Cuis.</option><option data-v-61053d50>Ch</option><option data-v-61053d50>SD</option><option data-v-61053d50>SDLAVABO</option><option data-v-61053d50>SDDOUCHE</option><option data-v-61053d50>SDB</option><option data-v-61053d50>SDBLAVABO</option><option data-v-61053d50>SDBBAIGN</option><option data-v-61053d50>SDBDOUCHE</option><option data-v-61053d50>SDBBIDET</option><option data-v-61053d50>VO</option><option data-v-61053d50>Part.Comm.</option>",15),Fe=[Ie],Oe=["onUpdate:modelValue","onChange"],Ve=d((()=>(0,a._)("option",null,null,-1))),ke=d((()=>(0,a._)("option",{value:"1"},"RA - Robinet arrêt",-1))),ze=d((()=>(0,a._)("option",{value:"4"},"WC",-1))),Ue=d((()=>(0,a._)("option",{value:"3"},"ROB - Robinetterie",-1))),qe=d((()=>(0,a._)("option",{value:"5"},"Parties communes",-1))),Ee=[Ve,ke,ze,Ue,qe],Se=["onUpdate:modelValue","onChange","disabled"],Re=["value"],Ae=["onUpdate:modelValue","onInput","disabled"],Ne=d((()=>(0,a._)("label",{style:{}},"Remarque si autre Lieu ou autre robinetterie: ",-1))),Be=d((()=>(0,a._)("br",null,null,-1))),Le={class:"more_inter_container"},Me={class:"more_inter_container"},He={class:"form_bloc intervention"},Te=d((()=>(0,a._)("div",{class:"form_bloc_title"},"Compte rendu / Commentaires :",-1))),je={class:"form_bloc_content"},We={id:"intervention",style:{"margin-bottom":"20px"}},Ye=d((()=>(0,a._)("label",null,"Accès porte",-1))),Ge=d((()=>(0,a._)("option",null,"Occupant",-1))),Ke=d((()=>(0,a._)("option",null,"Gardien",-1))),Ze=d((()=>(0,a._)("option",null,"Clé",-1))),$e=d((()=>(0,a._)("option",null,"Absent",-1))),Je=d((()=>(0,a._)("option",null,"Refus oral",-1))),Qe=d((()=>(0,a._)("option",null,"Avisé",-1))),Xe=[Ge,Ke,Ze,$e,Je,Qe],et={style:{"margin-bottom":"20px"}},tt=d((()=>(0,a._)("label",null,"Observations :",-1))),nt={id:"intervention"},at=d((()=>(0,a._)("label",null,"Statut intervention :",-1))),ot=d((()=>(0,a._)("option",null,"Clôturé",-1))),lt=d((()=>(0,a._)("option",null,"En suspens",-1))),it=[ot,lt],rt={style:{"margin-bottom":"20px"}},st=d((()=>(0,a._)("label",{for:"checkbox_devis"},"Devis à faire",-1))),_t=d((()=>(0,a._)("br",null,null,-1))),dt={style:{"margin-bottom":"20px"}},ut=d((()=>(0,a._)("label",null,"Temps passé (hors déplacement) :",-1))),pt=(0,a.uE)('<option value="15" data-v-61053d50>15min</option><option value="30" data-v-61053d50>30min</option><option value="45" data-v-61053d50>45min</option><option value="60" data-v-61053d50>1h</option><option value="75" data-v-61053d50>1h15min</option><option value="90" data-v-61053d50>1h30min</option><option value="105" data-v-61053d50>1h45min</option><option value="120" data-v-61053d50>2h</option><option value="135" data-v-61053d50>2h15min</option><option value="150" data-v-61053d50>2h30min</option><option value="165" data-v-61053d50>2h45min</option><option value="180" data-v-61053d50>3h</option><option value="195" data-v-61053d50>3h15min</option><option value="210" data-v-61053d50>3h30min</option><option value="225" data-v-61053d50>3h45min</option><option value="240" data-v-61053d50>4h</option>',16),ct=[pt],mt={style:{"margin-bottom":"20px"}},vt=d((()=>(0,a._)("label",null,"Photo de l'intervention :",-1))),ht=d((()=>(0,a._)("br",null,null,-1))),bt=["src"],gt=d((()=>(0,a._)("label",{style:{}},"Visa Gardien ou Représentant",-1))),Dt={style:{display:"flex","justify-content":"center"}},ft=d((()=>(0,a._)("input",{class:"input_button",type:"submit",value:"TERMINER L'INTERVENTION",style:{"margin-top":"20px"}},null,-1)));function wt(e,t,n,o,l,s){const _=(0,a.up)("VueSignaturePad");return(0,a.wg)(),(0,a.iD)("form",{onSubmit:t[32]||(t[32]=(0,i.iM)(((...e)=>s.getFormValues&&s.getFormValues(...e)),["prevent"]))},[(0,a._)("div",u,[(0,a._)("div",p,[c,m,(0,a._)("div",{style:{background:"white",padding:"2px",border:"1px solid black",position:"absolute",right:"20px",top:"20px"},onClick:t[0]||(t[0]=e=>l.isShowPresta=!0)},"Prestations"),(0,a._)("div",{style:{"padding-bottom":"20px",width:"100%",height:"600px","overflow-y":"scroll",background:"white",position:"absolute",top:"0px"},class:(0,r.C_)({invis:!l.isShowPresta})},[v,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.inter_option["presta_fam1"],(e=>((0,a.wg)(),(0,a.iD)("div",{key:e,value:e.id},(0,r.zw)(e.libelle),9,h)))),128)),b,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.inter_option["presta_fam3"],(e=>((0,a.wg)(),(0,a.iD)("div",{key:e,value:e.id},(0,r.zw)(e.libelle),9,g)))),128)),D,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.inter_option["presta_fam4"],(e=>((0,a.wg)(),(0,a.iD)("div",{key:e,value:e.id},(0,r.zw)(e.libelle),9,f)))),128)),w,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.inter_option["presta_fam5"],(e=>((0,a.wg)(),(0,a.iD)("div",{key:e,value:e.id},(0,r.zw)(e.libelle),9,y)))),128)),(0,a._)("div",{style:{background:"white",padding:"2px","font-size":"25px",position:"absolute",top:"25px",right:"25px"},onClick:t[1]||(t[1]=e=>{l.isShowPresta=!1})},"X")],2)]),(0,a._)("div",P,"DÉPANNAGE N° "+(0,r.zw)(l.resp.DP_id),1),(0,a._)("div",C,(0,r.zw)(l.resp.Evt_dtDebut),1),(0,a._)("div",x,[I,(0,a._)("div",F,[(0,a._)("div",O,[V,(0,a._)("div",null,(0,r.zw)(l.resp.DP_reference),1)]),(0,a._)("div",k,[(0,a.Uk)((0,r.zw)(l.resp.Imm_1_adr),1),z,(0,a.Uk)(" "+(0,r.zw)(l.resp.Imm_2_adr),1)])])]),(0,a._)("div",U,[q,(0,a._)("div",E,[(0,a._)("div",null,(0,r.zw)(l.resp.gardien_code),1)])]),(0,a._)("div",S,[R,(0,a._)("div",A,[(0,a._)("div",N,[B,(0,a._)("div",null,(0,r.zw)(l.resp.DP_dateSaisie),1)]),(0,a._)("div",L,[M,(0,a._)("div",null,(0,r.zw)(l.resp.DP_DonneurOrdre),1)])])]),(0,a._)("div",H,[T,(0,a._)("div",j,[(0,a._)("div",W,[(0,a._)("table",null,[Y,(0,a._)("tr",null,[(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>l.occupant.DPOC_occupant=e),onInput:t[3]||(t[3]=t=>s.saveFormData(e.index))},null,544),[[i.nr,l.occupant.DPOC_occupant]])]),(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>l.occupant.DPOC_bat=e),onInput:t[5]||(t[5]=t=>s.saveFormData(e.index))},null,544),[[i.nr,l.occupant.DPOC_bat]])]),(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>l.occupant.DPOC_escalier=e),onInput:t[7]||(t[7]=t=>s.saveFormData(e.index))},null,544),[[i.nr,l.occupant.DPOC_escalier]])])])]),(0,a._)("table",null,[G,(0,a._)("tr",null,[(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>l.occupant.DPOC_etage=e),onInput:t[9]||(t[9]=t=>s.saveFormData(e.index))},null,544),[[i.nr,l.occupant.DPOC_etage]])]),(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=e=>l.occupant.DPOC_porte=e),onInput:t[11]||(t[11]=t=>s.saveFormData(e.index))},null,544),[[i.nr,l.occupant.DPOC_porte]])]),(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=e=>l.occupant.DPOC_codeAcces=e),onInput:t[13]||(t[13]=t=>s.saveFormData(e.index))},null,544),[[i.nr,l.occupant.DPOC_codeAcces]])])])]),(0,a._)("table",null,[K,(0,a._)("tr",null,[(0,a._)("td",null,(0,r.zw)(l.occupant.DPOC_adresse),1),(0,a._)("td",null,(0,r.zw)(l.occupant.DPOC_tel1),1),(0,a._)("td",null,(0,r.zw)(l.occupant.DPOC_tel2),1),(0,a._)("td",null,(0,r.zw)(l.occupant.DPOC_tel3),1)])]),(0,a._)("input",{type:"checkbox",checked:1==l.occupant.DPOC_blnPresent,name:"blnPresent",disabled:""},null,8,Z),$,(0,a._)("input",{type:"checkbox",checked:1==l.occupant.DPOC_blnCleLoge,name:"cleLoge",disabled:""},null,8,J),Q])])]),(0,a._)("div",X,[ee,(0,a._)("div",te,[(0,a._)("div",ne,[(0,a._)("table",null,[ae,(0,a._)("tr",null,[(0,a._)("td",null,(0,r.zw)(l.resp.gardien_nom),1),(0,a._)("td",null,(0,r.zw)(l.resp.gardien_adresse),1),(0,a._)("td",null,(0,r.zw)(l.resp.gardien_HeuresLoge),1)])]),(0,a._)("table",null,[oe,(0,a._)("tr",null,[(0,a._)("td",null,(0,r.zw)(l.resp.gardien_telephone),1),(0,a._)("td",null,(0,r.zw)(l.resp.gardien_mobile),1)])])])])]),(0,a._)("div",le,[ie,(0,a._)("div",re,[(0,a._)("div",se,[(0,a._)("table",null,[_e,(0,a._)("tr",null,[(0,a._)("td",null,(0,r.zw)(l.resp.client_raisonSoc),1),(0,a._)("td",null,(0,r.zw)(l.resp.client_tel1),1)])])])])]),(0,a._)("div",de,[ue,(0,a._)("div",pe,[(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.DP_remarqueContractuelle=e),onInput:t[15]||(t[15]=t=>s.saveFormData(e.index))},null,544),[[i.nr,l.DP_remarqueContractuelle]])])]),(0,a._)("div",ce,[me,(0,a._)("div",ve,[(0,a._)("div",null,(0,r.zw)(l.resp.objet_tvx),1)])]),(0,a._)("div",he,[be,(0,a._)("div",ge,[(0,a._)("div",null,(0,r.zw)(l.resp.remarque_preliminaire),1)])])]),(0,a._)("div",De,[fe,(0,a._)("div",we,[(0,a._)("div",ye,[(0,a._)("div",Pe,[(0,a._)("table",null,[Ce,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.inter,((t,n)=>((0,a.wg)(),(0,a.iD)("tr",{key:n},[(0,a._)("td",null,[(0,a.wy)((0,a._)("select",{style:{width:"50px"},"onUpdate:modelValue":e=>t["inter_lieu"]=e,onChange:e=>s.saveFormData(n)},Fe,40,xe),[[i.bM,t["inter_lieu"]]])]),(0,a._)("td",null,[(0,a.wy)((0,a._)("select",{style:{width:"75px"},"onUpdate:modelValue":e=>t["inter_type"]=e,onChange:e=>s.saveFormData(n)},Ee,40,Oe),[[i.bM,t["inter_type"]]])]),(0,a._)("td",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e=>t["inter_presta"]=e,onChange:e=>s.saveFormData(n),disabled:""!=t["inter_type"]&&""!=t["inter_lieu"]?e.disabled:""},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.inter_option["presta_fam"+t["inter_type"]],(e=>((0,a.wg)(),(0,a.iD)("option",{key:e,value:e.id},(0,r.zw)(e.libelle),9,Re)))),128))],40,Se),[[i.bM,t["inter_presta"]]])]),(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{style:{width:"15px"},type:"number","onUpdate:modelValue":e=>t["inter_qty"]=e,onInput:e=>s.saveFormData(n),disabled:""!=t["inter_lieu"]&&""!=t["inter_type"]?e.disabled:""},null,40,Ae),[[i.nr,t["inter_qty"]]])])])))),128))]),(0,a._)("p",null,[Ne,Be,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":t[16]||(t[16]=e=>l.DP_remarqueInter=e),onInput:t[17]||(t[17]=t=>s.saveFormData(e.index))},null,544),[[i.nr,l.DP_remarqueInter]])]),(0,a._)("div",Le,[(0,a._)("a",{href:"#",class:"add-more-inter",onClick:t[18]||(t[18]=(0,i.iM)(((...e)=>s.addItem&&s.addItem(...e)),["prevent"]))},"+")]),(0,a._)("div",Me,[(0,a._)("a",{href:"#",class:"add-more-inter",onClick:t[19]||(t[19]=(0,i.iM)(((...e)=>s.removeItem&&s.removeItem(...e)),["prevent"]))},"-")])])])])]),(0,a._)("div",He,[Te,(0,a._)("div",je,[(0,a._)("div",We,[Ye,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[20]||(t[20]=e=>this.acces_porte=e),onChange:t[21]||(t[21]=t=>s.saveFormData(e.index)),required:""},Xe,544),[[i.bM,this.acces_porte]])]),(0,a._)("div",et,[tt,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":t[22]||(t[22]=e=>l.DP_observations=e),onInput:t[23]||(t[23]=t=>s.saveFormData(e.index))},null,544),[[i.nr,l.DP_observations]])]),(0,a._)("div",nt,[at,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[24]||(t[24]=e=>this.statut=e),onChange:t[25]||(t[25]=t=>s.saveFormData(e.index)),required:""},it,544),[[i.bM,this.statut]])]),(0,a._)("div",rt,[(0,a.wy)((0,a._)("input",{type:"checkbox",name:"checkbox_devis","onUpdate:modelValue":t[26]||(t[26]=e=>this.raf_devis=e),onChange:t[27]||(t[27]=t=>s.saveFormData(e.index))},null,544),[[i.e8,this.raf_devis]]),st,_t]),(0,a._)("div",dt,[ut,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[28]||(t[28]=e=>this.temps_passe=e),onChange:t[29]||(t[29]=t=>s.saveFormData(e.index)),required:""},ct,544),[[i.bM,this.temps_passe]])]),(0,a._)("div",mt,[vt,ht,(0,a._)("input",{type:"file",id:"image_upload",name:"image",onChange:t[30]||(t[30]=(...e)=>s.handleFiles&&s.handleFiles(...e)),accept:"image/png, image/jpeg"},null,32)]),""!=this.image?((0,a.wg)(),(0,a.iD)("img",{key:0,src:"data:image/png;base64 ,"+this.image,style:{width:"60px","margin-bottom":"30px"}},null,8,bt)):(0,a.kq)("",!0),gt,(0,a._)("div",null,[(0,a.Wm)(_,{onChange:s.save,height:"200px",style:{width:"70%",margin:"auto"},class:"signaturePad",ref:"signaturePad",options:{onBegin:e.onBegin,onEnd:s.onEnd}},null,8,["onChange","options"]),(0,a._)("div",Dt,[(0,a._)("div",{onClick:t[31]||(t[31]=(...e)=>s.undo&&s.undo(...e))},"Effacer")])])])]),ft],32)}n(7658);var yt=n(5633),Pt=n(8736),Ct={name:"DPForm",data(){return{isShowPresta:!1,dp_id:"",resp:"",DP_observations:"",DP_remarqueContractuelle:"",DP_remarqueInter:"",temps_passe:"",statut:"",image:"",signature:{image:"",data_arr:{}},raf_devis:!1,acces_porte:"",inter_option:[],inter:[{inter_type:"",inter_lieu:"",inter_presta:"",inter_qty:"1"}],occupant:{},currIp:this.currIp}},async mounted(){let e=window.location.href.split("?"),t=e[1].split("&"),n={},a="";t.forEach((function(e){a=e.split("="),2==a.length&&(n[a[0]]=a[1])}));let o=n["item_id"];this.dp_id=o,yt.Z.get(this.currIp+"/mission_dp?item_id="+o).then((e=>{console.log(e),this.resp=e.data,yt.Z.get(this.currIp+"/get_contrat_presta?ctr_id="+this.resp.Ctr_code).then((e=>{this.inter_option=e.data,console.log(this.inter_option)}))})),yt.Z.get(this.currIp+"/dp_occ?dp_id="+o).then((e=>{this.occupant=e.data}));let l=await(0,Pt.U2)("DP-"+this.dp_id);void 0!==l&&void 0!==l["signature"]["data_arr"]&&Object.keys(l["signature"]["data_arr"]).length>0&&this.$refs.signaturePad.fromData(l["signature"]["data_arr"]),this.getFormData(),window.addEventListener("beforeunload",this.saveFormData)},beforeUnmount(){window.removeEventListener("beforeunload",this.saveFormData)},methods:{undo(){this.$refs.signaturePad.clearSignature(),this.save()},save(){const{data:e}=this.$refs.signaturePad.saveSignature();var t="";e&&(t=e.replace("data:","").replace(/^.+,/,""));const n=this.$refs.signaturePad.toData();this.signature.image=t,this.signature.data_arr=n,this.saveFormData()},onEnd(){this.save()},getFormValues(){const e={DP_id:this.dp_id,DP_occ:this.occupant,DP_remarqueContractuelle:this.DP_remarqueContractuelle,DP_remarqueInter:this.DP_remarqueInter,DP_observations:this.DP_observations,temps_passe:this.temps_passe,statut:this.statut,acces_porte:this.acces_porte,raf_devis:this.raf_devis,inter:this.inter,signature:this.signature,image:this.image};console.log(e),confirm("TERMINER L'INTERVENTION. Vous allez envoyer les données au siège, vous ne pourrez plus accéder à cette DP.")&&yt.Z.post(this.currIp+"/submit_dp",e).then((e=>{console.log(e.data),200==e.status&&this.$router.push("/")}))},addItem(){if(void 0!=this.inter[this.inter.length-1]){var e=this.inter[this.inter.length-1];""!=e.inter_type&&""!=e.inter_lieu&&""!=e.inter_presta&&""!=e.inter_qty?this.inter.push({inter_type:"",inter_lieu:"",inter_presta:"",inter_qty:"1"}):alert("Vous devez remplir l'intervention précédente avant d'en rajouter une nouvelle")}else this.inter.push({inter_type:"",inter_lieu:"",inter_presta:"",inter_qty:"1"});this.saveFormData()},removeItem(){this.inter.pop(),this.saveFormData()},async handleFiles(e){var t=await e.target.files||await e.dataTransfer.files,n=t[0];const a=new FileReader;a.onloadend=()=>{const e=a.result.replace("data:","").replace(/^.+,/,"");this.image=e,console.log(this.image),this.saveFormData()},a.readAsDataURL(n)},async saveFormData(){var e=this.$data;e=JSON.stringify(e);var t=JSON.parse(e);await(0,Pt.t8)("DP-"+this.dp_id,t)},async getFormData(){let e=await(0,Pt.U2)("DP-"+this.dp_id);void 0!==e&&(this.inter=e.inter,this.DP_remarqueInter=e.DP_remarqueInter,this.DP_remarqueContractuelle=e.DP_remarqueContractuelle,this.statut=e.statut,this.raf_devis=e.raf_devis,this.acces_porte=e.acces_porte,this.temps_passe=e.temps_passe,this.signature=e.signature,this.image=e.image,this.DP_observations=e.DP_observations)}}},xt=n(5312);const It=(0,xt.Z)(Ct,[["render",wt],["__scopeId","data-v-61053d50"]]);var Ft=It,Ot={name:"DPFormView",components:{DPForm:Ft}};const Vt=(0,xt.Z)(Ot,[["render",l]]);var kt=Vt},3630:function(e,t,n){e.exports=n.p+"img/fleche2_blanc.dac177de.svg"},2957:function(e,t,n){e.exports=n.p+"img/logo-gereco-2.012b9603.svg"}}]);
//# sourceMappingURL=929.f80c7c0d.js.map