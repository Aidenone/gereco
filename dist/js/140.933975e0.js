"use strict";(self["webpackChunkwpa_gereco"]=self["webpackChunkwpa_gereco"]||[]).push([[140],{7140:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ue}});var o=n(3396);const a={class:"IDBTest"};function l(e,t,n,l,i,s){const r=(0,o.up)("IDBTest");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(r,{msg:"Welcome to Your Vue.js App"})])}var i=n(9242),s=n(7139),r=n(3630),u=n(2957);const p=e=>((0,o.dD)("data-v-7358ef17"),e=e(),(0,o.Cn)(),e),_={class:"form_header"},d=(0,o.uE)('<div class="header_headline" data-v-7358ef17><a href="/" data-v-7358ef17><img class="return_button" src="'+r+'" data-v-7358ef17></a><img src="'+u+'" data-v-7358ef17></div><div style="font-size:19px;color:white;font-weight:bold;" data-v-7358ef17>VISITE GÉNÉRALE</div>',2),m={style:{"font-size":"14px",color:"white","font-weight":"bold","margin-bottom":"20px"}},c={class:"form_bloc"},v=p((()=>(0,o._)("div",{class:"form_bloc_title"},"Contrat",-1))),h={class:"form_bloc_content"},b=p((()=>(0,o._)("div",{class:"col"},[(0,o._)("div",{class:"form_bloc_subtitle"},"Référence"),(0,o._)("div")],-1))),f={class:"col"},g=p((()=>(0,o._)("br",null,null,-1))),w={class:"form_bloc_content table_container"},y=p((()=>(0,o._)("tr",null,[(0,o._)("th",null,"Nb Logt"),(0,o._)("th",null,"Nb Ch."),(0,o._)("th",null,"Nb WC comm."),(0,o._)("th",null,"Nb loc. comm.")],-1))),x={class:"form_bloc_content table_container"},I=p((()=>(0,o._)("div",{class:"form_bloc_title"},"Gardien",-1))),V={class:"recur_table"},D=p((()=>(0,o._)("tr",null,[(0,o._)("th",null,"Nom"),(0,o._)("th",null,"Adresse loge"),(0,o._)("th",null,"Code"),(0,o._)("th",null,"Horaire")],-1))),U=p((()=>(0,o._)("tr",null,[(0,o._)("th",null,"Fixe"),(0,o._)("th",null,"Portable")],-1))),C={class:"form_bloc_content table_container"},F=p((()=>(0,o._)("div",{class:"form_bloc_title"},"Syndic / Gérant",-1))),k={class:"recur_table"},G=p((()=>(0,o._)("tr",null,[(0,o._)("th",null,"Nom"),(0,o._)("th",null,"Fixe")],-1))),z={class:"form_bloc_content table_container"},N=p((()=>(0,o._)("div",{class:"form_bloc_title"},"Observations GERECO",-1))),E={class:"form_bloc_content"},j={class:"form_bloc"},q=p((()=>(0,o._)("div",{class:"form_bloc_title"},"Remarques (informations à modifier)",-1))),A={class:"form_bloc_content"},S={class:"form_bloc vg"},L={class:"form_bloc_title"},T={class:"form_bloc_content table_container"},O=p((()=>(0,o._)("tr",null,[(0,o._)("th",null,"N°"),(0,o._)("th",null,"Bât."),(0,o._)("th",null,"Esc."),(0,o._)("th",null,"Et."),(0,o._)("th",null,"Porte"),(0,o._)("th",null,"Suivi"),(0,o._)("th",null,"Modifier")],-1))),R=["onUpdate:modelValue","onInput"],B=["onUpdate:modelValue","onInput"],M=["onUpdate:modelValue","onInput"],Z=["onUpdate:modelValue","onInput"],H=["onUpdate:modelValue","onChange"],J=(0,o.uE)('<option value="Occupant" data-v-7358ef17>Occupant</option><option value="Abs." data-v-7358ef17>Abs.</option><option value="Abs. x2" data-v-7358ef17>Abs. x2</option><option value="Gardien" data-v-7358ef17>Gardien</option><option value="CLE" data-v-7358ef17>CLE</option><option value="RO" data-v-7358ef17>RO</option><option value="Avisé" data-v-7358ef17>Avisé</option>',7),W=[J],Y={style:{"text-align":"center"}},K=["onClick"],P={class:"form_bloc compteurs"},$=p((()=>(0,o._)("div",{class:"form_bloc_title"},"Compteurs",-1))),Q={class:"form_bloc_content table_container"},X={class:"liste_vg"},ee=p((()=>(0,o._)("tr",null,[(0,o._)("th",null,"Numéro"),(0,o._)("th",null,"Type"),(0,o._)("th",null,"Date"),(0,o._)("th",null,"Localisation"),(0,o._)("th",null,"Index")],-1))),te=["onUpdate:modelValue","onInput"],ne=["onUpdate:modelValue","onInput"],oe=["onUpdate:modelValue","onInput"],ae=["onUpdate:modelValue","onInput"],le=["onUpdate:modelValue","onInput"],ie=["onClick"],se={class:"form_bloc"},re=p((()=>(0,o._)("label",{style:{"font-weight":"bold"}},"Compte-rendu: ",-1))),ue=p((()=>(0,o._)("br",null,null,-1))),pe={style:{"margin-bottom":"20px"}},_e=p((()=>(0,o._)("label",null,"Temps passé (hors déplacement)* :",-1))),de=(0,o.uE)('<option value="1" data-v-7358ef17>1 jours</option><option value="2" data-v-7358ef17>2 jours</option><option value="3" data-v-7358ef17>3 jours</option><option value="4" data-v-7358ef17>4 jours</option><option value="5" data-v-7358ef17>5 jours</option><option value="6" data-v-7358ef17>6 jours</option><option value="7" data-v-7358ef17>7 jours</option><option value="8" data-v-7358ef17>8 jours</option><option value="9" data-v-7358ef17>9 jours</option><option value="10" data-v-7358ef17>10 jours</option><option value="11" data-v-7358ef17>11 jours</option><option value="12" data-v-7358ef17>12 jours</option><option value="13" data-v-7358ef17>13 jours</option><option value="14" data-v-7358ef17>14 jours</option>',14),me=[de],ce=p((()=>(0,o._)("p",null,[(0,o._)("label",{style:{"font-weight":"bold"}},"Visa Gardien ou Représentant"),(0,o._)("input",{style:{display:"none"},type:"text",name:""})],-1))),ve=p((()=>(0,o._)("div",{style:{position:"relative",top:"-10px",border:"1px solid black",width:"80px","text-align":"center",margin:"auto",padding:"4px"}},"Signature",-1))),he=p((()=>(0,o._)("input",{class:"input_button",type:"submit",value:"TERMINER L'INTERVENTION"},null,-1)));function be(e,t,n,a,l,r){const u=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("form",{onSubmit:t[11]||(t[11]=(0,i.iM)(((...e)=>r.submitForm&&r.submitForm(...e)),["prevent"]))},[(0,o._)("div",_,[d,(0,o._)("div",m,(0,s.zw)(l.resp.Evt_dtDebut),1),(0,o._)("div",c,[v,(0,o._)("div",h,[b,(0,o._)("div",f,[(0,o.Uk)((0,s.zw)(l.resp.Imm_1_adr),1),g,(0,o.Uk)(" "+(0,s.zw)(l.resp.Imm_2_adr),1)])]),(0,o._)("div",w,[(0,o._)("div",null,[(0,o._)("table",null,[y,(0,o._)("tr",null,[(0,o._)("td",null,(0,s.zw)(l.resp.Imm_nbLog),1),(0,o._)("td",null,(0,s.zw)(e.Imm_nbCham),1),(0,o._)("td",null,(0,s.zw)(e.Imm_nbWC),1),(0,o._)("td",null,(0,s.zw)(l.resp.nbLocComm),1)])])])]),(0,o._)("div",x,[I,(0,o._)("div",V,[(0,o._)("table",null,[D,(0,o._)("tr",null,[(0,o._)("td",null,(0,s.zw)(l.resp.gardien_nom),1),(0,o._)("td",null,(0,s.zw)(l.resp.gardien_adresse),1),(0,o._)("td",null,(0,s.zw)(l.resp.gardien_code),1),(0,o._)("td",null,(0,s.zw)(l.resp.gardien_HeuresLoge),1)])]),(0,o._)("table",null,[U,(0,o._)("tr",null,[(0,o._)("td",null,(0,s.zw)(l.resp.gardien_telephone),1),(0,o._)("td",null,(0,s.zw)(l.resp.gardien_mobile),1)])])]),(0,o._)("div",C,[F,(0,o._)("div",k,[(0,o._)("table",null,[G,(0,o._)("tr",null,[(0,o._)("td",null,(0,s.zw)(l.resp.client_raisonSoc),1),(0,o._)("td",null,(0,s.zw)(l.resp.client_tel1),1)])])])]),(0,o._)("div",z,[N,(0,o._)("div",E,[(0,o.wy)((0,o._)("textarea",{disabled:"","onUpdate:modelValue":t[0]||(t[0]=e=>l.resp.VG_remarqueTech=e),onInput:t[1]||(t[1]=t=>r.saveFormData(e.index)),style:{height:"70px"}},null,544),[[i.nr,l.resp.VG_remarqueTech]])])]),(0,o._)("div",j,[q,(0,o._)("div",A,[(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.remarque=e),onInput:t[3]||(t[3]=t=>r.saveFormData(e.index))},null,544),[[i.nr,l.remarque]])])])])])]),(0,o._)("div",S,[(0,o._)("div",L,[(0,o.Uk)("Appartements "),(0,o._)("div",{class:"filter_button",onClick:t[4]||(t[4]=e=>l.isShowGreen=!l.isShowGreen)},"Filtrer")]),(0,o._)("div",T,[(0,o._)("div",null,[(0,o._)("table",null,[O,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.appartements,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{key:t,class:(0,s.C_)({green:"Abs."!=e.suivi&&""!=e.suivi,invis:"Abs."!=e.suivi&&""!=e.suivi&&!l.isShowGreen})},[(0,o._)("td",null,(0,s.zw)(e.num),1),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{style:{width:"25px"},type:"text","onUpdate:modelValue":t=>e.bat=t,onInput:e=>r.saveFormData(t)},null,40,R),[[i.nr,e.bat]])]),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{style:{width:"25px"},type:"text","onUpdate:modelValue":t=>e.escalier=t,onInput:e=>r.saveFormData(t)},null,40,B),[[i.nr,e.escalier]])]),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{style:{width:"25px"},type:"text","onUpdate:modelValue":t=>e.etage=t,onInput:e=>r.saveFormData(t)},null,40,M),[[i.nr,e.etage]])]),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{style:{width:"25px"},type:"text","onUpdate:modelValue":t=>e.porte=t,onInput:e=>r.saveFormData(t)},null,40,Z),[[i.nr,e.porte]])]),(0,o._)("td",null,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t=>e.suivi=t,onChange:e=>r.saveFormData(t),id:"suivi"},W,40,H),[[i.bM,e.suivi]])]),(0,o._)("td",Y,[this.vg_id?((0,o.wg)(),(0,o.j4)(u,{key:0,to:{name:"VGInter",params:{id:l.vg_id},query:{vgocc:t+1}}},{default:(0,o.w5)((()=>[(0,o.Uk)("--\x3e")])),_:2},1032,["to"])):(0,o.kq)("",!0)]),(0,o._)("div",{onClick:e=>r.removeLine(t),class:"line_remover"}," x ",8,K)],2)))),128))]),(0,o._)("div",{onClick:t[5]||(t[5]=(...e)=>r.addItemAppartements&&r.addItemAppartements(...e)),class:"line_adder"},"+")])])]),(0,o._)("div",P,[$,(0,o._)("div",Q,[(0,o._)("div",null,[(0,o._)("table",X,[ee,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.compteurs,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{key:t,class:"vg-line"},[(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{style:{width:"50px"},type:"text","onUpdate:modelValue":t=>e.numero=t,onInput:e=>r.saveFormData(t)},null,40,te),[[i.nr,e.numero]])]),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{style:{width:"28px"},type:"text","onUpdate:modelValue":t=>e.type=t,onInput:e=>r.saveFormData(t)},null,40,ne),[[i.nr,e.type]])]),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{style:{width:"68px"},type:"text","onUpdate:modelValue":t=>e.date=t,onInput:e=>r.saveFormData(t)},null,40,oe),[[i.nr,e.date]])]),(0,o._)("td",null,[(0,o.wy)((0,o._)("textarea",{style:{width:"80px"},"onUpdate:modelValue":t=>e.localisation=t,onInput:e=>r.saveFormData(t)},null,40,ae),[[i.nr,e.localisation]])]),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{style:{width:"34px"},type:"text","onUpdate:modelValue":t=>e.index=t,onInput:e=>r.saveFormData(t)},null,40,le),[[i.nr,e.index]])]),(0,o._)("div",{onClick:e=>r.removeCompteur(t),class:"line_remover"}," x ",8,ie)])))),128))]),(0,o._)("div",{onClick:t[6]||(t[6]=(...e)=>r.addItemCompteurs&&r.addItemCompteurs(...e)),class:"line_adder"},"+")])])]),(0,o._)("div",se,[(0,o._)("p",null,[re,ue,(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>this.compte_rendu=e),onInput:t[8]||(t[8]=t=>r.saveFormData(e.index))},null,544),[[i.nr,this.compte_rendu]])]),(0,o._)("div",pe,[_e,(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>this.temps_passe=e),onChange:t[10]||(t[10]=t=>r.saveFormData(e.index))},me,544),[[i.bM,this.temps_passe]])]),ce,ve]),he],32)}n(7658);var fe=n(9262),ge=n(4311),we={name:"IDBTest",data(){return{isShowGreen:!0,currIp:this.currIp,resp:"",vg_id:"",compte_rendu:"",remarque:"",temps_passe:"",inter_option:[],compteurs:[{numero:"",type:"",date:"",localisation:"",index:""}],appartements:[{num:"1",nom:"",bat:"",escalier:"",etage:"",porte:"",suivi:"",remarque_inter:"",checkbox_cloture:!1,checkbox_suspens:!1,checkbox_devis:!1,remarque:"",inter:[{inter_type:"",inter_lieu:"",inter_presta:"",inter_qty:""}],verif_ra:!1,verif_rob:!1,verif_wc:!1,verif_gen:!1}]}},mounted(){let e=window.location.href.split("?"),t=e[1].split("&"),n={},o="";t.forEach((function(e){o=e.split("="),2==o.length&&(n[o[0]]=o[1])}));let a=n["item_id"];this.vg_id=a,ge.Z.get(this.currIp+"/mission_vg?item_id="+a).then((e=>{this.resp=e.data,ge.Z.get(this.currIp+"/get_contrat_presta?ctr_id="+this.resp.Ctr_code).then((e=>{this.inter_option=e.data,console.log(this.inter_option),this.getFormData()}))})),window.addEventListener("beforeunload",this.saveFormData)},beforeUnmount(){window.removeEventListener("beforeunload",this.saveFormData)},methods:{async saveFormData(e){e+=1;var t=this.$data,n=JSON.stringify(t);if(n=JSON.parse(n),isNaN(e)){let e=1;while(await(0,fe.U2)("VG-"+this.vg_id+"-"+e))await(0,fe.IV)("VG-"+this.vg_id+"-"+e),e+=1;e=1;while(n.appartements[e-1])await(0,fe.t8)("VG-"+this.vg_id+"-"+e,n.appartements[e-1]),e+=1}else await(0,fe.t8)("VG-"+this.vg_id+"-"+e,n.appartements[e-1]);await(0,fe.t8)("VG-"+this.vg_id,n),t=this.inter_option,console.log(t),n=JSON.stringify(t),console.log(n),n=JSON.parse(n),await(0,fe.t8)("test",n)},async getFormData(){let e=1,t=[];if(void 0!==await(0,fe.U2)("VG-"+this.vg_id+"-"+e)){while(void 0!==await(0,fe.U2)("VG-"+this.vg_id+"-"+e)){let n=await(0,fe.U2)("VG-"+this.vg_id+"-"+e);t[e-1]=n,e+=1}this.appartements=t}if(void 0!==await(0,fe.U2)("VG-"+this.vg_id)){let e=await(0,fe.U2)("VG-"+this.vg_id);this.compteurs=e.compteurs,this.compte_rendu=e.compte_rendu,this.temps_passe=e.temps_passe}this.saveFormData()},addItemAppartements(){var e=this.appartements[this.appartements.length-1],t=e.num;this.appartements.push({num:Number(t)+1,bat:e.bat,nom:e.nom,escalier:e.escalier,etage:e.etage,porte:"",suivi:"",remarque_inter:"",checkbox_cloture:!1,checkbox_suspens:!1,checkbox_devis:!1,remarque:"",inter:[{inter_type:"",inter_lieu:"",inter_presta:"",inter_qty:""}],verif_ra:!1,verif_rob:!1,verif_wc:!1,verif_gen:!1}),this.saveFormData()},addItemCompteurs(){this.compteurs.push({numero:"",type:"",date:"",index:""}),this.saveFormData()},removeItem(e,t){this["inter_"+t].splice(e,1),this.saveFormData()},removeLine(e){confirm("Voulez-vous supprimer cette ligne ?")&&(this.appartements.splice(e,1),this.saveFormData())},removeCompteur(e){confirm("Voulez-vous supprimer cette ligne ?")&&(this.compteurs.splice(e,1),this.saveFormData())},submitForm(){const e={appartements:this.appartements,compteurs:this.compteurs,temps_passe:this.temps_passe,compte_rendu:this.compte_rendu,vg_id:this.vg_id,remarque:this.remarque,ctr_code:this.resp.Ctr_code,ctr_nature:this.resp.Ctr_nature};console.log(e),ge.Z.post("http://192.168.73.11:8000/submit_vg",e).then((e=>{console.log(e.data)}))}}},ye=n(89);const xe=(0,ye.Z)(we,[["render",be],["__scopeId","data-v-7358ef17"]]);var Ie=xe,Ve={name:"IDBTestView",components:{IDBTest:Ie}};const De=(0,ye.Z)(Ve,[["render",l]]);var Ue=De},3630:function(e,t,n){e.exports=n.p+"img/fleche2_blanc.dac177de.svg"},2957:function(e,t,n){e.exports=n.p+"img/logo-gereco-2.012b9603.svg"}}]);
//# sourceMappingURL=140.933975e0.js.map