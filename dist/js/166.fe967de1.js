"use strict";(self["webpackChunkwpa_gereco"]=self["webpackChunkwpa_gereco"]||[]).push([[166],{1166:function(t,e,a){a.r(e),a.d(e,{default:function(){return gt}});var n=a(8473);const i={class:"VGInter"};function o(t,e,a,o,r,s){const l=(0,n.up)("VGInter");return(0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)(l,{msg:"Welcome to Your Vue.js App"})])}var r=a(9197),s=a(4887),l=a(3630),p=a(2957);const d=t=>((0,n.dD)("data-v-1669a8de"),t=t(),(0,n.Cn)(),t),_={class:"form_header"},u={class:"header_headline"},c=["href"],m=d((()=>(0,n._)("img",{class:"return_button",src:l},null,-1))),h=[m],v=d((()=>(0,n._)("img",{src:p},null,-1))),g=d((()=>(0,n._)("tr",null,[(0,n._)("th",null,"N°"),(0,n._)("th",null,"Bât."),(0,n._)("th",null,"Esc."),(0,n._)("th",null,"Et."),(0,n._)("th",null,"Porte"),(0,n._)("th",null,"Suivi")],-1))),b=d((()=>(0,n._)("div",{class:"form_bloc_title",style:{color:"black","margin-left":"20px","margin-top":"30px"}},"Nom de l'occupant",-1))),f={class:"checkbox_list",style:{"margin-bottom":"40px"}},y=d((()=>(0,n._)("div",{class:"form_bloc_title",style:{color:"black","margin-left":"20px"}},"Vérification",-1))),w={key:1,for:"checkbox_cloture"},D=d((()=>(0,n._)("br",null,null,-1))),x={key:3,for:"checkbox_cloture"},k=d((()=>(0,n._)("br",null,null,-1))),V={key:5,for:"checkbox_cloture"},C=d((()=>(0,n._)("br",null,null,-1))),F={class:"form_bloc intervention"},U=d((()=>(0,n._)("div",{class:"form_bloc_title"},"Intervention",-1))),I={class:"form_bloc_content"},q={class:"intervention_type"},S={class:"intervention_bloc"},E=d((()=>(0,n._)("tr",null,[(0,n._)("th",null,"Lieu"),(0,n._)("th",null,"Famille"),(0,n._)("th",null,"Presta."),(0,n._)("th",null,"Qté.")],-1))),A=["onUpdate:modelValue","onChange"],B=(0,n.uE)("<option data-v-1669a8de></option><option data-v-1669a8de>WC</option><option data-v-1669a8de>WCLAVEMAIN</option><option data-v-1669a8de>Cuis.</option><option data-v-1669a8de>Ch</option><option data-v-1669a8de>SD</option><option data-v-1669a8de>SDLAVABO</option><option data-v-1669a8de>SDDOUCHE</option><option data-v-1669a8de>SDB</option><option data-v-1669a8de>SDBLAVABO</option><option data-v-1669a8de>SDBBAIGN</option><option data-v-1669a8de>SDBDOUCHE</option><option data-v-1669a8de>SDBBIDET</option><option data-v-1669a8de>VO</option><option data-v-1669a8de>Part.Comm.</option>",15),R=[B],G=["onUpdate:modelValue","onChange"],P=(0,n.uE)('<option value="" data-v-1669a8de></option><option value="1" data-v-1669a8de>RA - Robinet arrêt</option><option value="4" data-v-1669a8de>WC</option><option value="3" data-v-1669a8de>ROB - Robinetterie</option><option value="5" data-v-1669a8de>Parties communes</option>',5),O=[P],z=["onUpdate:modelValue","onChange","disabled"],M=["value"],W=["onUpdate:modelValue","onInput","disabled"],L={class:"more_inter_container"},N={class:"more_inter_container"},$={style:{"margin-top":"7px"}},H=d((()=>(0,n._)("label",{style:{}},"Remarque si autre Lieu ou autre Robinetterie: ",-1))),j=d((()=>(0,n._)("br",null,null,-1))),Y={class:"form_bloc intervention"},Z=d((()=>(0,n._)("div",{class:"form_bloc_title"},"Compte rendu / Commentaires :",-1))),J={class:"form_bloc_content"},K={class:"checkbox_list"},T=d((()=>(0,n._)("label",null,"Statut intervention :",-1))),Q=d((()=>(0,n._)("option",null,"Clôturé",-1))),X=d((()=>(0,n._)("option",null,"En suspens",-1))),tt=[Q,X],et=d((()=>(0,n._)("label",{for:"checkbox_cloture"},"HC-Devis à faire",-1))),at={style:{"margin-top":"5px"}},nt=d((()=>(0,n._)("label",null,"Observations :",-1))),it=d((()=>(0,n._)("label",{style:{}},"Visa Gardien ou Représentant",-1))),ot={style:{display:"flex","justify-content":"center"}},rt=["href"],st=d((()=>(0,n._)("div",{style:{height:"30px",width:"40px"}},null,-1)));function lt(t,e,a,i,o,l){const p=(0,n.up)("VueSignaturePad");return(0,n.wg)(),(0,n.iD)("form",{onSubmit:e[19]||(e[19]=(0,r.iM)(((...e)=>t.submitForm&&t.submitForm(...e)),["prevent"]))},[(0,n._)("div",_,[(0,n._)("div",u,[(0,n._)("a",{href:"/#/idbtest/?item_id="+this.vg_id},h,8,c),v])]),(0,n._)("table",null,[g,(0,n._)("tr",null,[(0,n._)("td",null,(0,s.zw)(this.appartements.num),1),(0,n._)("td",null,(0,s.zw)(this.appartements.bat),1),(0,n._)("td",null,(0,s.zw)(this.appartements.escalier),1),(0,n._)("td",null,(0,s.zw)(this.appartements.etage),1),(0,n._)("td",null,(0,s.zw)(this.appartements.porte),1),(0,n._)("td",null,(0,s.zw)(this.appartements.suivi),1)])]),b,(0,n.wy)((0,n._)("input",{type:"text",name:"occ_nom","onUpdate:modelValue":e[0]||(e[0]=t=>this.appartements.nom=t),onChange:e[1]||(e[1]=e=>l.saveFormData(t.index)),style:{"margin-bottom":"40px"}},null,544),[[r.nr,this.appartements.nom]]),(0,n._)("div",f,[y,void 0!==this.inter_option["presta_fam1"]&&this.inter_option["presta_fam1"].length>0?(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:0,type:"checkbox",name:"checkbox_ra","onUpdate:modelValue":e[2]||(e[2]=t=>this.appartements.verif_ra=t),onChange:e[3]||(e[3]=e=>l.saveFormData(t.index))},null,544)),[[r.e8,this.appartements.verif_ra]]):(0,n.kq)("",!0),void 0!==this.inter_option["presta_fam1"]&&this.inter_option["presta_fam1"].length>0?((0,n.wg)(),(0,n.iD)("label",w,"Vérification RA")):(0,n.kq)("",!0),D,void 0!==this.inter_option["presta_fam3"]&&this.inter_option["presta_fam3"].length>0?(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:2,type:"checkbox",name:"checkbox_rob","onUpdate:modelValue":e[4]||(e[4]=t=>this.appartements.verif_rob=t),onChange:e[5]||(e[5]=e=>l.saveFormData(t.index))},null,544)),[[r.e8,this.appartements.verif_rob]]):(0,n.kq)("",!0),void 0!==this.inter_option["presta_fam3"]&&this.inter_option["presta_fam3"].length>0?((0,n.wg)(),(0,n.iD)("label",x,"Verification Robinetterie")):(0,n.kq)("",!0),k,void 0!==this.inter_option["presta_fam4"]&&this.inter_option["presta_fam4"].length>0?(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:4,type:"checkbox",name:"checkbox_wc","onUpdate:modelValue":e[6]||(e[6]=t=>this.appartements.verif_wc=t),onChange:e[7]||(e[7]=e=>l.saveFormData(t.index))},null,544)),[[r.e8,this.appartements.verif_wc]]):(0,n.kq)("",!0),void 0!==this.inter_option["presta_fam4"]&&this.inter_option["presta_fam4"].length>0?((0,n.wg)(),(0,n.iD)("label",V,"Verification WC")):(0,n.kq)("",!0),C]),(0,n._)("div",F,[U,(0,n._)("div",I,[(0,n._)("div",q,[(0,n._)("div",S,[(0,n._)("table",null,[E,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.appartements.inter,((e,a)=>((0,n.wg)(),(0,n.iD)("tr",{key:a},[(0,n._)("td",null,[(0,n.wy)((0,n._)("select",{style:{width:"50px"},"onUpdate:modelValue":t=>e["inter_lieu"]=t,onChange:t=>l.saveFormData(a)},R,40,A),[[r.bM,e["inter_lieu"]]])]),(0,n._)("td",null,[(0,n.wy)((0,n._)("select",{style:{width:"75px"},"onUpdate:modelValue":t=>e["inter_type"]=t,onChange:t=>l.saveFormData(a)},O,40,G),[[r.bM,e["inter_type"]]])]),(0,n._)("td",null,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t=>e["inter_presta"]=t,onChange:t=>l.saveFormData(a),disabled:""!=e["inter_type"]?t.disabled:""},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.inter_option["presta_fam"+e["inter_type"]],(t=>((0,n.wg)(),(0,n.iD)("option",{key:t,value:t.id},(0,s.zw)(t.libelle),9,M)))),128))],40,z),[[r.bM,e["inter_presta"]]])]),(0,n._)("td",null,[(0,n.wy)((0,n._)("input",{style:{width:"15px"},type:"number","onUpdate:modelValue":t=>e["inter_qty"]=t,onInput:t=>l.saveFormData(a),disabled:""!=e["inter_lieu"]&&""!=e["inter_type"]?t.disabled:""},null,40,W),[[r.nr,e["inter_qty"]]])])])))),128))]),(0,n._)("div",L,[(0,n._)("a",{href:"#",class:"add-more-inter",onClick:e[8]||(e[8]=(0,r.iM)(((...t)=>l.addItem&&l.addItem(...t)),["prevent"]))},"+")]),(0,n._)("div",N,[(0,n._)("a",{href:"#",class:"add-more-inter",onClick:e[9]||(e[9]=(0,r.iM)(((...t)=>l.removeItem&&l.removeItem(...t)),["prevent"]))},"-")]),(0,n._)("p",$,[H,j,(0,n.wy)((0,n._)("textarea",{"onUpdate:modelValue":e[10]||(e[10]=t=>this.appartements.remarque_inter=t),onInput:e[11]||(e[11]=e=>l.saveFormData(t.index))},null,544),[[r.nr,this.appartements.remarque_inter]])])])])])]),(0,n._)("div",Y,[Z,(0,n._)("div",J,[(0,n._)("div",K,[T,(0,n.wy)((0,n._)("select",{class:"select-status","onUpdate:modelValue":e[12]||(e[12]=t=>this.appartements.statut=t),onChange:e[13]||(e[13]=e=>l.saveFormData(t.index)),required:""},tt,544),[[r.bM,this.appartements.statut]]),(0,n.wy)((0,n._)("input",{type:"checkbox",name:"checkbox_devis","onUpdate:modelValue":e[14]||(e[14]=t=>this.appartements.checkbox_devis=t),onChange:e[15]||(e[15]=e=>l.saveFormData(t.index))},null,544),[[r.e8,this.appartements.checkbox_devis]]),et]),(0,n._)("div",at,[nt,(0,n.wy)((0,n._)("textarea",{"onUpdate:modelValue":e[16]||(e[16]=t=>this.appartements.remarque=t),onInput:e[17]||(e[17]=e=>l.saveFormData(t.index))},null,544),[[r.nr,this.appartements.remarque]])]),it,(0,n._)("div",null,[(0,n.Wm)(p,{onChange:l.save,height:"200px",class:"signaturePad",ref:"signaturePad",style:{width:"70%",margin:"auto"},options:{onBegin:t.onBegin,onEnd:l.onEnd}},null,8,["onChange","options"]),(0,n._)("div",ot,[(0,n._)("div",{onClick:e[18]||(e[18]=(...t)=>l.undo&&l.undo(...t))},"Effacer")])])])]),(0,n._)("a",{href:"/#/idbtest/?item_id="+this.vg_id,style:{position:"relative",top:"12px",background:"#81c0cc",color:"white",padding:"10px","border-radius":"10px"}},"SAUVEGARDER",8,rt),st],32)}a(7658);var pt=a(8736),dt=a(5633),_t={name:"VGInter",data(){return{vg_occ:"",vg_id:"",ctr_code:"",inter_option:[],appartements:{num:"",bat:"",nom:"",escalier:"",etage:"",porte:"",suivi:"",signature:{image:"",data_arr:{}},remarque_inter:"",statut:"Clôturé",checkbox_devis:!1,remarque:"",inter:[{inter_type:"",inter_lieu:"",inter_presta:"",inter_qty:"1"}],verif_ra:!1,verif_rob:!1,verif_wc:!1,verif_gen:!1}}},async mounted(){let t=window.location.href.split("?"),e=t[1].split("&"),a={},n="";e.forEach((function(t){n=t.split("="),2==n.length&&(a[n[0]]=n[1])}));let i=a.vgocc;this.vg_occ=i,this.vg_id=this.$route.params.id,this.getFormData();let o=await(0,pt.U2)("VG-"+this.vg_id+"-"+this.vg_occ),r=await(0,pt.U2)("VG-"+this.vg_id);this.ctr_code=await r.resp.Ctr_code,await dt.Z.get(this.currIp+"/get_contrat_presta?ctr_id="+this.ctr_code).then((t=>{this.inter_option=t.data})),void 0!==o&&void 0!==o["signature"]["data_arr"]&&Object.keys(o["signature"]["data_arr"]).length>0&&this.$refs.signaturePad.fromData(o["signature"]["data_arr"]),this.getFormData()},beforeUnmount(){},methods:{undo(){this.$refs.signaturePad.clearSignature(),this.save()},save(){const{data:t}=this.$refs.signaturePad.saveSignature();var e="";t&&(e=t.replace("data:","").replace(/^.+,/,""));const a=this.$refs.signaturePad.toData();this.appartements.signature.image=e,this.appartements.signature.data_arr=a,this.saveFormData()},onEnd(){this.save()},async saveFormData(){var t=this.$data;t=JSON.stringify(t);var e=JSON.parse(t);await(0,pt.t8)("VG-"+this.vg_id+"-"+this.vg_occ,e.appartements)},async getFormData(){let t=await(0,pt.U2)("VG-"+this.vg_id+"-"+this.vg_occ);this.appartements=t},addItem(){if(void 0!=this.appartements.inter[this.appartements.inter.length-1]){var t=this.appartements.inter[this.appartements.inter.length-1];""!=t.inter_type&&""!=t.inter_lieu&&""!=t.inter_presta&&""!=t.inter_qty?this.appartements.inter.push({inter_type:"",inter_lieu:"",inter_presta:"",inter_qty:"1"}):alert("Vous devez remplir l'intervention précédente avant d'en rajouter une nouvelle")}else this.appartements.inter.push({inter_type:"",inter_lieu:"",inter_presta:"",inter_qty:"1"});this.saveFormData()},removeItem(){this.appartements.inter.pop(),this.saveFormData()},async handleFiles(t){var e=await t.target.files||await t.dataTransfer.files,a=e[0];const n=new FileReader;n.onloadend=()=>{const t=n.result.replace("data:","").replace(/^.+,/,"");this.appartements.signature=t,this.saveFormData()},n.readAsDataURL(a)}}},ut=a(5312);const ct=(0,ut.Z)(_t,[["render",lt],["__scopeId","data-v-1669a8de"]]);var mt=ct,ht={name:"VGInterView",components:{VGInter:mt}};const vt=(0,ut.Z)(ht,[["render",o]]);var gt=vt},3630:function(t,e,a){t.exports=a.p+"img/fleche2_blanc.dac177de.svg"},2957:function(t,e,a){t.exports=a.p+"img/logo-gereco-2.012b9603.svg"}}]);
//# sourceMappingURL=166.fe967de1.js.map