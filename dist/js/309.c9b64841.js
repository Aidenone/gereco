"use strict";(self["webpackChunkwpa_gereco"]=self["webpackChunkwpa_gereco"]||[]).push([[309],{8309:function(e,t,a){a.r(t),a.d(t,{default:function(){return xe}});var n=a(3396);const i={class:"VGInter"};function r(e,t,a,r,o,s){const l=(0,n.up)("VGInter");return(0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)(l,{msg:"Welcome to Your Vue.js App"})])}var o=a(9242),s=a(7139),l=a(3630),p=a(2957);const _=e=>((0,n.dD)("data-v-dea6e612"),e=e(),(0,n.Cn)(),e),d={class:"form_header"},u={class:"header_headline"},c=["href"],m=_((()=>(0,n._)("img",{class:"return_button",src:l},null,-1))),h=[m],v=_((()=>(0,n._)("img",{src:p},null,-1))),g=_((()=>(0,n._)("tr",null,[(0,n._)("th",null,"N°"),(0,n._)("th",null,"Bât."),(0,n._)("th",null,"Esc."),(0,n._)("th",null,"Et."),(0,n._)("th",null,"Porte"),(0,n._)("th",null,"Suivi")],-1))),b=_((()=>(0,n._)("div",{class:"form_bloc_title",style:{color:"black","margin-left":"20px","margin-top":"30px"}},"Nom de l'occupant",-1))),f={class:"checkbox_list",style:{"margin-bottom":"40px"}},y=_((()=>(0,n._)("div",{class:"form_bloc_title",style:{color:"black","margin-left":"20px"}},"Vérification",-1))),w={key:1,for:"checkbox_cloture"},x=_((()=>(0,n._)("br",null,null,-1))),k={key:3,for:"checkbox_cloture"},D=_((()=>(0,n._)("br",null,null,-1))),V={key:5,for:"checkbox_cloture"},C=_((()=>(0,n._)("br",null,null,-1))),F={class:"form_bloc intervention"},U=_((()=>(0,n._)("div",{class:"form_bloc_title"},"Intervention",-1))),q={class:"form_bloc_content"},I={class:"intervention_type"},R={class:"intervention_bloc"},E=_((()=>(0,n._)("tr",null,[(0,n._)("th",null,"Lieu"),(0,n._)("th",null,"Famille"),(0,n._)("th",null,"Presta."),(0,n._)("th",null,"Qté.")],-1))),G=["onUpdate:modelValue","onChange"],S=_((()=>(0,n._)("option",null,null,-1))),P=_((()=>(0,n._)("option",null,"SDB",-1))),z=_((()=>(0,n._)("option",null,"WC",-1))),M=_((()=>(0,n._)("option",null,"Cuis.",-1))),A=_((()=>(0,n._)("option",null,"Ch.",-1))),W=_((()=>(0,n._)("option",null,"SD",-1))),$=[S,P,z,M,A,W],B=["onUpdate:modelValue","onChange"],N=(0,n.uE)('<option value="" data-v-dea6e612></option><option value="1" data-v-dea6e612>RA - Robinet arrêt</option><option value="4" data-v-dea6e612>WC</option><option value="3" data-v-dea6e612>ROB - Robinetterie</option><option value="5" data-v-dea6e612>GENER - Générique</option>',5),O=[N],j=["onUpdate:modelValue","onChange","disabled"],H=["value"],L=_((()=>(0,n._)("option",{value:"991"},"Prestation hors-contrat",-1))),Y=["onUpdate:modelValue","onInput","disabled"],J={class:"more_inter_container"},K={class:"more_inter_container"},Z={style:{"margin-top":"7px"}},Q=_((()=>(0,n._)("label",{style:{}},"Remarque si autre Lieu ou autre Robinetterie: ",-1))),T=_((()=>(0,n._)("br",null,null,-1))),X={class:"form_bloc intervention"},ee=_((()=>(0,n._)("div",{class:"form_bloc_title"},"Compte rendu / Commentaires :",-1))),te={class:"form_bloc_content"},ae={class:"checkbox_list"},ne=_((()=>(0,n._)("label",null,"Statut intervention :",-1))),ie=_((()=>(0,n._)("option",null,"Clôturé",-1))),re=_((()=>(0,n._)("option",null,"En suspens",-1))),oe=[ie,re],se=_((()=>(0,n._)("label",{for:"checkbox_cloture"},"HC-Devis à faire",-1))),le={style:{"margin-top":"5px"}},pe=_((()=>(0,n._)("label",null,"Observations :",-1))),_e=_((()=>(0,n._)("label",{style:{}},"Visa Gardien ou Représentant",-1))),de={style:{display:"flex","justify-content":"center"}},ue=["href"],ce=_((()=>(0,n._)("div",{style:{height:"30px",width:"40px"}},null,-1)));function me(e,t,a,i,r,l){const p=(0,n.up)("VueSignaturePad");return(0,n.wg)(),(0,n.iD)("form",{onSubmit:t[19]||(t[19]=(0,o.iM)(((...t)=>e.submitForm&&e.submitForm(...t)),["prevent"]))},[(0,n._)("div",d,[(0,n._)("div",u,[(0,n._)("a",{href:"/#/idbtest/?item_id="+this.vg_id},h,8,c),v])]),(0,n._)("table",null,[g,(0,n._)("tr",null,[(0,n._)("td",null,(0,s.zw)(this.appartements.num),1),(0,n._)("td",null,(0,s.zw)(this.appartements.bat),1),(0,n._)("td",null,(0,s.zw)(this.appartements.escalier),1),(0,n._)("td",null,(0,s.zw)(this.appartements.etage),1),(0,n._)("td",null,(0,s.zw)(this.appartements.porte),1),(0,n._)("td",null,(0,s.zw)(this.appartements.suivi),1)])]),b,(0,n.wy)((0,n._)("input",{type:"text",name:"occ_nom","onUpdate:modelValue":t[0]||(t[0]=e=>this.appartements.nom=e),onChange:t[1]||(t[1]=t=>l.saveFormData(e.index)),style:{"margin-bottom":"40px"}},null,544),[[o.nr,this.appartements.nom]]),(0,n._)("div",f,[y,void 0!==this.inter_option["presta_fam1"]&&this.inter_option["presta_fam1"].length>0?(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:0,type:"checkbox",name:"checkbox_ra","onUpdate:modelValue":t[2]||(t[2]=e=>this.appartements.verif_ra=e),onChange:t[3]||(t[3]=t=>l.saveFormData(e.index))},null,544)),[[o.e8,this.appartements.verif_ra]]):(0,n.kq)("",!0),void 0!==this.inter_option["presta_fam1"]&&this.inter_option["presta_fam1"].length>0?((0,n.wg)(),(0,n.iD)("label",w,"Vérification RA")):(0,n.kq)("",!0),x,void 0!==this.inter_option["presta_fam3"]&&this.inter_option["presta_fam3"].length>0?(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:2,type:"checkbox",name:"checkbox_rob","onUpdate:modelValue":t[4]||(t[4]=e=>this.appartements.verif_rob=e),onChange:t[5]||(t[5]=t=>l.saveFormData(e.index))},null,544)),[[o.e8,this.appartements.verif_rob]]):(0,n.kq)("",!0),void 0!==this.inter_option["presta_fam3"]&&this.inter_option["presta_fam3"].length>0?((0,n.wg)(),(0,n.iD)("label",k,"Verification Robinetterie")):(0,n.kq)("",!0),D,void 0!==this.inter_option["presta_fam4"]&&this.inter_option["presta_fam4"].length>0?(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:4,type:"checkbox",name:"checkbox_wc","onUpdate:modelValue":t[6]||(t[6]=e=>this.appartements.verif_wc=e),onChange:t[7]||(t[7]=t=>l.saveFormData(e.index))},null,544)),[[o.e8,this.appartements.verif_wc]]):(0,n.kq)("",!0),void 0!==this.inter_option["presta_fam4"]&&this.inter_option["presta_fam4"].length>0?((0,n.wg)(),(0,n.iD)("label",V,"Verification WC")):(0,n.kq)("",!0),C]),(0,n._)("div",F,[U,(0,n._)("div",q,[(0,n._)("div",I,[(0,n._)("div",R,[(0,n._)("table",null,[E,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.appartements.inter,((t,a)=>((0,n.wg)(),(0,n.iD)("tr",{key:a},[(0,n._)("td",null,[(0,n.wy)((0,n._)("select",{style:{width:"50px"},"onUpdate:modelValue":e=>t["inter_lieu"]=e,onChange:e=>l.saveFormData(a)},$,40,G),[[o.bM,t["inter_lieu"]]])]),(0,n._)("td",null,[(0,n.wy)((0,n._)("select",{style:{width:"75px"},"onUpdate:modelValue":e=>t["inter_type"]=e,onChange:e=>l.saveFormData(a)},O,40,B),[[o.bM,t["inter_type"]]])]),(0,n._)("td",null,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":e=>t["inter_presta"]=e,onChange:e=>l.saveFormData(a),disabled:""!=t["inter_type"]?e.disabled:""},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.inter_option["presta_fam"+t["inter_type"]],(e=>((0,n.wg)(),(0,n.iD)("option",{key:e,value:e.id},(0,s.zw)(e.libelle),9,H)))),128)),L],40,j),[[o.bM,t["inter_presta"]]])]),(0,n._)("td",null,[(0,n.wy)((0,n._)("input",{style:{width:"15px"},type:"number","onUpdate:modelValue":e=>t["inter_qty"]=e,onInput:e=>l.saveFormData(a),disabled:""!=t["inter_lieu"]&&""!=t["inter_type"]?e.disabled:""},null,40,Y),[[o.nr,t["inter_qty"]]])])])))),128))]),(0,n._)("div",J,[(0,n._)("a",{href:"#",class:"add-more-inter",onClick:t[8]||(t[8]=(0,o.iM)(((...e)=>l.addItem&&l.addItem(...e)),["prevent"]))},"+")]),(0,n._)("div",K,[(0,n._)("a",{href:"#",class:"add-more-inter",onClick:t[9]||(t[9]=(0,o.iM)(((...e)=>l.removeItem&&l.removeItem(...e)),["prevent"]))},"-")]),(0,n._)("p",Z,[Q,T,(0,n.wy)((0,n._)("textarea",{"onUpdate:modelValue":t[10]||(t[10]=e=>this.appartements.remarque_inter=e),onInput:t[11]||(t[11]=t=>l.saveFormData(e.index))},null,544),[[o.nr,this.appartements.remarque_inter]])])])])])]),(0,n._)("div",X,[ee,(0,n._)("div",te,[(0,n._)("div",ae,[ne,(0,n.wy)((0,n._)("select",{class:"select-status","onUpdate:modelValue":t[12]||(t[12]=e=>this.appartements.statut=e),onChange:t[13]||(t[13]=t=>l.saveFormData(e.index)),required:""},oe,544),[[o.bM,this.appartements.statut]]),(0,n.wy)((0,n._)("input",{type:"checkbox",name:"checkbox_devis","onUpdate:modelValue":t[14]||(t[14]=e=>this.appartements.checkbox_devis=e),onChange:t[15]||(t[15]=t=>l.saveFormData(e.index))},null,544),[[o.e8,this.appartements.checkbox_devis]]),se]),(0,n._)("div",le,[pe,(0,n.wy)((0,n._)("textarea",{"onUpdate:modelValue":t[16]||(t[16]=e=>this.appartements.remarque=e),onInput:t[17]||(t[17]=t=>l.saveFormData(e.index))},null,544),[[o.nr,this.appartements.remarque]])]),_e,(0,n._)("div",null,[(0,n.Wm)(p,{onChange:l.save,height:"200px",class:"signaturePad",ref:"signaturePad",options:{onBegin:e.onBegin,onEnd:l.onEnd}},null,8,["onChange","options"]),(0,n._)("div",de,[(0,n._)("div",{onClick:t[18]||(t[18]=(...e)=>l.undo&&l.undo(...e))},"Effacer")])])])]),(0,n._)("a",{href:"/#/idbtest/?item_id="+this.vg_id,style:{position:"relative",top:"12px",background:"#81c0cc",color:"white",padding:"10px","border-radius":"10px"}},"SAUVEGARDER",8,ue),ce],32)}a(7658);var he=a(9262),ve={name:"VGInter",data(){return{vg_occ:"",vg_id:"",ctr_code:"",inter_option:[],appartements:{num:"",bat:"",nom:"",escalier:"",etage:"",porte:"",suivi:"",signature:{image:"",data_arr:{}},remarque_inter:"",statut:"Clôturé",checkbox_devis:!1,remarque:"",inter:[{inter_type:"",inter_lieu:"",inter_presta:"",inter_qty:"1"}],verif_ra:!1,verif_rob:!1,verif_wc:!1,verif_gen:!1}}},async mounted(){let e=window.location.href.split("?"),t=e[1].split("&"),a={},n="";t.forEach((function(e){n=e.split("="),2==n.length&&(a[n[0]]=n[1])}));let i=a.vgocc;this.vg_occ=i,this.vg_id=this.$route.params.id;let r=await(0,he.U2)("VG-"+this.vg_id+"-"+this.vg_occ);void 0!==r&&void 0!==r["signature"]["data_arr"]&&Object.keys(r["signature"]["data_arr"]).length>0&&this.$refs.signaturePad.fromData(r["signature"]["data_arr"]),this.getFormData()},beforeUnmount(){},methods:{undo(){this.$refs.signaturePad.undoSignature(),this.save()},save(){const{data:e}=this.$refs.signaturePad.saveSignature();var t="";e&&(t=e.replace("data:","").replace(/^.+,/,""));const a=this.$refs.signaturePad.toData();this.appartements.signature.image=t,this.appartements.signature.data_arr=a,this.saveFormData()},onEnd(){this.save()},async saveFormData(){var e=this.$data;e=JSON.stringify(e);var t=JSON.parse(e);await(0,he.t8)("VG-"+this.vg_id+"-"+this.vg_occ,t.appartements)},async getFormData(){let e=await(0,he.U2)("VG-"+this.vg_id+"-"+this.vg_occ),t=await(0,he.U2)("VG-"+this.vg_id);this.inter_option=t.inter_option,console.log(t),this.appartements=e},addItem(){if(void 0!=this.appartements.inter[this.appartements.inter.length-1]){var e=this.appartements.inter[this.appartements.inter.length-1];""!=e.inter_type&&""!=e.inter_lieu&&""!=e.inter_presta&&""!=e.inter_qty?this.appartements.inter.push({inter_type:"",inter_lieu:"",inter_presta:"",inter_qty:"1"}):alert("Vous devez remplir l'intervention précédente avant d'en rajouter une nouvelle")}else this.appartements.inter.push({inter_type:"",inter_lieu:"",inter_presta:"",inter_qty:"1"});this.saveFormData()},removeItem(){this.appartements.inter.pop(),this.saveFormData()},async handleFiles(e){var t=await e.target.files||await e.dataTransfer.files,a=t[0];const n=new FileReader;n.onloadend=()=>{const e=n.result.replace("data:","").replace(/^.+,/,"");this.appartements.signature=e,this.saveFormData()},n.readAsDataURL(a)}}},ge=a(89);const be=(0,ge.Z)(ve,[["render",me],["__scopeId","data-v-dea6e612"]]);var fe=be,ye={name:"VGInterView",components:{VGInter:fe}};const we=(0,ge.Z)(ye,[["render",r]]);var xe=we},3630:function(e,t,a){e.exports=a.p+"img/fleche2_blanc.dac177de.svg"},2957:function(e,t,a){e.exports=a.p+"img/logo-gereco-2.012b9603.svg"}}]);
//# sourceMappingURL=309.c9b64841.js.map