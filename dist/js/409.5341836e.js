"use strict";(self["webpackChunkwpa_gereco"]=self["webpackChunkwpa_gereco"]||[]).push([[409],{409:function(t,e,n){n.r(e),n.d(e,{default:function(){return It}});var a=n(3396);const i={class:"VHInter"};function o(t,e,n,o,r,l){const s=(0,a.up)("VHInter");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(s,{msg:"Welcome to Your Vue.js App"})])}var r=n(9242),l=n(7139),s=n(3630),p=n(2957);const _=t=>((0,a.dD)("data-v-499bf33f"),t=t(),(0,a.Cn)(),t),u={class:"form_header"},d={class:"header_headline"},h=["href"],m=_((()=>(0,a._)("img",{class:"return_button",src:s},null,-1))),v=[m],c=_((()=>(0,a._)("img",{src:p},null,-1))),f=_((()=>(0,a._)("div",{style:{"font-size":"19px",color:"white","font-weight":"bold"}},"VISITE HEBDOMADAIRE",-1))),b={style:{"font-size":"14px",color:"white","font-weight":"bold","margin-bottom":"20px"}},g=_((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Nom"),(0,a._)("th",null,"Bât."),(0,a._)("th",null,"Esc."),(0,a._)("th",null,"Et."),(0,a._)("th",null,"Porte"),(0,a._)("th",null,"Objet")],-1))),y={class:"checkbox_list",style:{"margin-bottom":"40px","margin-top":"40px"}},w=_((()=>(0,a._)("div",{class:"form_bloc_title",style:{color:"black","margin-left":"20px"}},"Vérification",-1))),x={key:1,for:"checkbox_cloture"},k=_((()=>(0,a._)("br",null,null,-1))),D={key:3,for:"checkbox_cloture"},V=_((()=>(0,a._)("br",null,null,-1))),C={key:5,for:"checkbox_cloture"},F=_((()=>(0,a._)("br",null,null,-1))),q={class:"form_bloc intervention"},U=_((()=>(0,a._)("div",{class:"form_bloc_title"},"Intervention",-1))),I={class:"form_bloc_content",style:{"margin-bottom":"5px"}},E={class:"intervention_type"},H={class:"intervention_bloc"},R=_((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Lieu"),(0,a._)("th",null,"Famille"),(0,a._)("th",null,"Presta."),(0,a._)("th",null,"Qté.")],-1))),z=["onUpdate:modelValue","onChange"],S=_((()=>(0,a._)("option",null,null,-1))),P=_((()=>(0,a._)("option",null,"SDB",-1))),M=_((()=>(0,a._)("option",null,"WC",-1))),j=_((()=>(0,a._)("option",null,"Cuis.",-1))),A=_((()=>(0,a._)("option",null,"Ch.",-1))),O=_((()=>(0,a._)("option",null,"SD",-1))),B=[S,P,M,j,A,O],W=["onUpdate:modelValue","onChange"],$=_((()=>(0,a._)("option",null,null,-1))),N=_((()=>(0,a._)("option",{value:"1"},"RA - Robinet arrêt",-1))),G=_((()=>(0,a._)("option",{value:"4"},"WC",-1))),L=_((()=>(0,a._)("option",{value:"3"},"ROB - Robinetterie",-1))),Y=_((()=>(0,a._)("option",{value:"5"},"GENER - Générique",-1))),J=[$,N,G,L,Y],K=["onUpdate:modelValue","onChange","disabled"],T=["value"],Z=_((()=>(0,a._)("option",{value:"991"},"Prestation hors-contrat",-1))),Q=["onUpdate:modelValue","onInput","disabled"],X={class:"more_inter_container"},tt={class:"more_inter_container"},et={style:{"margin-top":"7px"}},nt=_((()=>(0,a._)("label",{style:{}},"Remarque si autre Lieu ou autre Robinetterie: ",-1))),at=_((()=>(0,a._)("br",null,null,-1))),it={class:"form_bloc intervention"},ot=_((()=>(0,a._)("div",{class:"form_bloc_title"},"Compte rendu / Commentaires :",-1))),rt={class:"form_bloc_content"},lt={class:"checkbox_list"},st=_((()=>(0,a._)("label",null,"Statut intervention :",-1))),pt=_((()=>(0,a._)("option",null,"Clôturé",-1))),_t=_((()=>(0,a._)("option",null,"En suspens",-1))),ut=[pt,_t],dt=_((()=>(0,a._)("label",{for:"checkbox_cloture"},"HC-Devis à faire",-1))),ht={style:{"margin-top":"5px"}},mt=_((()=>(0,a._)("label",null,"Observations :",-1))),vt=_((()=>(0,a._)("label",null,"Temps passé (hors déplacement)* :",-1))),ct=(0,a.uE)('<option value="15" data-v-499bf33f>15min</option><option value="30" data-v-499bf33f>30min</option><option value="45" data-v-499bf33f>45min</option><option value="60" data-v-499bf33f>1h</option><option value="75" data-v-499bf33f>1h15min</option><option value="90" data-v-499bf33f>1h30min</option><option value="105" data-v-499bf33f>1h45min</option><option value="120" data-v-499bf33f>2h</option><option value="135" data-v-499bf33f>2h15min</option><option value="150" data-v-499bf33f>2h30min</option><option value="165" data-v-499bf33f>2h45min</option><option value="180" data-v-499bf33f>3h</option><option value="195" data-v-499bf33f>3h15min</option><option value="210" data-v-499bf33f>3h30min</option><option value="225" data-v-499bf33f>3h45min</option><option value="240" data-v-499bf33f>4h</option>',16),ft=[ct],bt=_((()=>(0,a._)("label",{style:{}},"Visa Gardien ou Représentant",-1))),gt={style:{display:"flex","justify-content":"center"}},yt=["href"],wt=_((()=>(0,a._)("div",{style:{height:"30px",width:"40px"}},null,-1)));function xt(t,e,n,i,o,s){const p=(0,a.up)("VueSignaturePad");return(0,a.wg)(),(0,a.iD)("form",{onSubmit:e[18]||(e[18]=(0,r.iM)(((...t)=>s.submitForm&&s.submitForm(...t)),["prevent"]))},[(0,a._)("div",u,[(0,a._)("div",d,[(0,a._)("a",{href:"/#/vh/?item_id="+this.vh_id},v,8,h),c]),f,(0,a._)("div",b,"N°"+(0,l.zw)(o.vh_occ),1)]),(0,a._)("table",null,[g,(0,a._)("tr",null,[(0,a._)("td",null,(0,l.zw)(this.appartements.nom),1),(0,a._)("td",null,(0,l.zw)(this.appartements.bat),1),(0,a._)("td",null,(0,l.zw)(this.appartements.escalier),1),(0,a._)("td",null,(0,l.zw)(this.appartements.etage),1),(0,a._)("td",null,(0,l.zw)(this.appartements.porte),1),(0,a._)("td",null,(0,l.zw)(this.appartements.objet),1)])]),(0,a._)("div",y,[w,void 0!==this.inter_option["presta_fam1"]&&this.inter_option["presta_fam1"].length>0?(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:0,type:"checkbox",name:"checkbox_ra","onUpdate:modelValue":e[0]||(e[0]=t=>this.appartements.verif_ra=t),onChange:e[1]||(e[1]=e=>s.saveFormData(t.index))},null,544)),[[r.e8,this.appartements.verif_ra]]):(0,a.kq)("",!0),void 0!==this.inter_option["presta_fam1"]&&this.inter_option["presta_fam1"].length>0?((0,a.wg)(),(0,a.iD)("label",x,"Vérification RA")):(0,a.kq)("",!0),k,void 0!==this.inter_option["presta_fam3"]&&this.inter_option["presta_fam3"].length>0?(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:2,type:"checkbox",name:"checkbox_rob","onUpdate:modelValue":e[2]||(e[2]=t=>this.appartements.verif_rob=t),onChange:e[3]||(e[3]=e=>s.saveFormData(t.index))},null,544)),[[r.e8,this.appartements.verif_rob]]):(0,a.kq)("",!0),void 0!==this.inter_option["presta_fam3"]&&this.inter_option["presta_fam3"].length>0?((0,a.wg)(),(0,a.iD)("label",D,"Verification Robinetterie")):(0,a.kq)("",!0),V,void 0!==this.inter_option["presta_fam4"]&&this.inter_option["presta_fam4"].length>0?(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:4,type:"checkbox",name:"checkbox_wc","onUpdate:modelValue":e[4]||(e[4]=t=>this.appartements.verif_wc=t),onChange:e[5]||(e[5]=e=>s.saveFormData(t.index))},null,544)),[[r.e8,this.appartements.verif_wc]]):(0,a.kq)("",!0),void 0!==this.inter_option["presta_fam4"]&&this.inter_option["presta_fam4"].length>0?((0,a.wg)(),(0,a.iD)("label",C,"Verification WC")):(0,a.kq)("",!0),F]),(0,a._)("div",q,[U,(0,a._)("div",I,[(0,a._)("div",E,[(0,a._)("div",H,[(0,a._)("table",null,[R,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.appartements.inter,((e,n)=>((0,a.wg)(),(0,a.iD)("tr",{key:n},[(0,a._)("td",null,[(0,a.wy)((0,a._)("select",{style:{width:"50px"},"onUpdate:modelValue":t=>e["inter_lieu"]=t,onChange:t=>s.saveFormData(n)},B,40,z),[[r.bM,e["inter_lieu"]]])]),(0,a._)("td",null,[(0,a.wy)((0,a._)("select",{style:{width:"75px"},"onUpdate:modelValue":t=>e["inter_type"]=t,onChange:t=>s.saveFormData(n)},J,40,W),[[r.bM,e["inter_type"]]])]),(0,a._)("td",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t=>e["inter_presta"]=t,onChange:t=>s.saveFormData(n),disabled:""!=e["inter_type"]?t.disabled:""},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.inter_option["presta_fam"+e["inter_type"]],(t=>((0,a.wg)(),(0,a.iD)("option",{key:t,value:t.id},(0,l.zw)(t.libelle),9,T)))),128)),Z],40,K),[[r.bM,e["inter_presta"]]])]),(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{style:{width:"15px"},type:"number","onUpdate:modelValue":t=>e["inter_qty"]=t,onInput:t=>s.saveFormData(n),disabled:""!=e["inter_lieu"]&&""!=e["inter_type"]?t.disabled:""},null,40,Q),[[r.nr,e["inter_qty"]]])])])))),128))]),(0,a._)("div",X,[(0,a._)("a",{href:"#",class:"add-more-inter",onClick:e[6]||(e[6]=(0,r.iM)(((...t)=>s.addItem&&s.addItem(...t)),["prevent"]))},"+")]),(0,a._)("div",tt,[(0,a._)("a",{href:"#",class:"add-more-inter",onClick:e[7]||(e[7]=(0,r.iM)(((...t)=>s.removeItem&&s.removeItem(...t)),["prevent"]))},"-")]),(0,a._)("p",et,[nt,at,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e[8]||(e[8]=t=>this.appartements.remarque_inter=t),onInput:e[9]||(e[9]=e=>s.saveFormData(t.index))},null,544),[[r.nr,this.appartements.remarque_inter]])])])])])]),(0,a._)("div",it,[ot,(0,a._)("div",rt,[(0,a._)("div",lt,[st,(0,a.wy)((0,a._)("select",{class:"select-status","onUpdate:modelValue":e[10]||(e[10]=t=>this.appartements.statut=t),onChange:e[11]||(e[11]=e=>s.saveFormData(t.index)),required:""},ut,544),[[r.bM,this.appartements.statut]]),(0,a.wy)((0,a._)("input",{type:"checkbox",name:"checkbox_devis","onUpdate:modelValue":e[12]||(e[12]=t=>this.appartements.checkbox_devis=t),onChange:e[13]||(e[13]=e=>s.saveFormData(t.index))},null,544),[[r.e8,this.appartements.checkbox_devis]]),dt]),(0,a._)("div",ht,[mt,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e[14]||(e[14]=t=>this.appartements.remarque=t)},null,512),[[r.nr,this.appartements.remarque]])]),(0,a._)("div",null,[vt,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[15]||(e[15]=t=>this.appartements.temps_passe=t),onChange:e[16]||(e[16]=e=>s.saveFormData(t.index))},ft,544),[[r.bM,this.appartements.temps_passe]])]),bt,(0,a._)("div",null,[(0,a.Wm)(p,{onChange:s.save,height:"200px",class:"signaturePad",ref:"signaturePad",options:{onBegin:t.onBegin,onEnd:s.onEnd}},null,8,["onChange","options"]),(0,a._)("div",gt,[(0,a._)("div",{onClick:e[17]||(e[17]=(...t)=>s.undo&&s.undo(...t))},"Effacer")])])])]),(0,a._)("a",{href:"/#/vh/?item_id="+this.vh_id,style:{position:"relative",top:"12px",background:"#c2bdb9",color:"white",padding:"10px","border-radius":"10px"}},"SAUVEGARDER",8,yt),wt],32)}n(7658);var kt=n(9262),Dt={name:"VHInter",data(){return{vh_occ:"",vh_id:"",ctr_code:"",inter_option:[],appartements:{num:"",nom:"",bat:"",escalier:"",etage:"",porte:"",objet:"",signature:{image:"",data_arr:{}},temps_passe:"",remarque_inter:"",statut:"Clôturé",checkbox_devis:!1,remarque:"",inter:[{inter_type:"",inter_lieu:"",inter_presta:"",inter_qty:"1"}],verif_ra:!1,verif_rob:!1,verif_wc:!1,verif_gen:!1}}},async mounted(){let t=window.location.href.split("?"),e=t[1].split("&"),n={},a="";e.forEach((function(t){a=t.split("="),2==a.length&&(n[a[0]]=a[1])}));let i=n.vhocc;this.vh_occ=i,this.vh_id=this.$route.params.id;let o=await(0,kt.U2)("VH-"+this.vh_id+"-"+this.vh_occ);void 0!==o&&void 0!==o["signature"]["data_arr"]&&Object.keys(o["signature"]["data_arr"]).length>0&&this.$refs.signaturePad.fromData(o["signature"]["data_arr"]),this.getFormData(),window.addEventListener("beforeunload",this.saveFormData)},beforeUnmount(){window.removeEventListener("beforeunload",this.saveFormData)},methods:{undo(){this.$refs.signaturePad.undoSignature(),this.save()},save(){const{data:t}=this.$refs.signaturePad.saveSignature();var e="";t&&(e=t.replace("data:","").replace(/^.+,/,""));const n=this.$refs.signaturePad.toData();this.appartements.signature.image=e,this.appartements.signature.data_arr=n,this.saveFormData()},onEnd(){this.save()},async saveFormData(){var t=this.$data;t=JSON.stringify(t);var e=JSON.parse(t);await(0,kt.t8)("VH-"+this.vh_id+"-"+this.vh_occ,e.appartements)},async getFormData(){let t=await(0,kt.U2)("VH-"+this.vh_id+"-"+this.vh_occ),e=await(0,kt.U2)("VH-"+this.vh_id);this.inter_option=e.inter_option,console.log(e),this.appartements=t},addItem(){if(void 0!=this.appartements.inter[this.appartements.inter.length-1]){var t=this.appartements.inter[this.appartements.inter.length-1];""!=t.inter_type&&""!=t.inter_lieu&&""!=t.inter_presta&&""!=t.inter_qty?this.appartements.inter.push({inter_type:"",inter_lieu:"",inter_presta:"",inter_qty:"1"}):alert("Vous devez remplir l'intervention précédente avant d'en rajouter une nouvelle")}else this.appartements.inter.push({inter_type:"",inter_lieu:"",inter_presta:"",inter_qty:"1"});this.saveFormData()},removeItem(){this.appartements.inter.pop(),this.saveFormData()},submitForm(){this.getFormData()}}},Vt=n(89);const Ct=(0,Vt.Z)(Dt,[["render",xt],["__scopeId","data-v-499bf33f"]]);var Ft=Ct,qt={name:"VHInterView",components:{VHInter:Ft}};const Ut=(0,Vt.Z)(qt,[["render",o]]);var It=Ut},3630:function(t,e,n){t.exports=n.p+"img/fleche2_blanc.dac177de.svg"},2957:function(t,e,n){t.exports=n.p+"img/logo-gereco-2.012b9603.svg"}}]);
//# sourceMappingURL=409.5341836e.js.map