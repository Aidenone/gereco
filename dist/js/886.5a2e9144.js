"use strict";(self["webpackChunkwpa_gereco"]=self["webpackChunkwpa_gereco"]||[]).push([[886],{1886:function(t,e,a){a.r(e),a.d(e,{default:function(){return Dt}});var n=a(3396);const o={class:"IDBTest"};function l(t,e,a,l,i,s){const r=(0,n.up)("IDBTest");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n.Wm)(r,{msg:"Welcome to Your Vue.js App"})])}var i=a(9242),s=a(7139),r=a(3630),u=a(2957);const c=t=>((0,n.dD)("data-v-8cc935c2"),t=t(),(0,n.Cn)(),t),d={class:"form_header"},_=(0,n.uE)('<div class="header_headline" data-v-8cc935c2><a href="/" data-v-8cc935c2><img class="return_button" src="'+r+'" data-v-8cc935c2></a><img src="'+u+'" data-v-8cc935c2></div><div style="font-size:19px;color:white;font-weight:bold;" data-v-8cc935c2>VISITE GÉNÉRALE</div>',2),p={style:{"font-size":"14px",color:"white","font-weight":"bold","margin-bottom":"20px"}},m={class:"form_bloc"},v=c((()=>(0,n._)("div",{class:"form_bloc_title"},"Contrat",-1))),h={class:"form_bloc_content"},b=c((()=>(0,n._)("div",{class:"col"},[(0,n._)("div",{class:"form_bloc_subtitle"},"Référence"),(0,n._)("div")],-1))),g={class:"col"},w=c((()=>(0,n._)("br",null,null,-1))),f={class:"form_bloc_content table_container"},y=c((()=>(0,n._)("tr",null,[(0,n._)("th",null,"Nb Logt"),(0,n._)("th",null,"Nb Ch."),(0,n._)("th",null,"Nb WC comm."),(0,n._)("th",null,"Nb loc. comm.")],-1))),I={class:"form_bloc_content table_container"},x=c((()=>(0,n._)("div",{class:"form_bloc_title"},"Gardien",-1))),V={class:"recur_table"},D=c((()=>(0,n._)("tr",null,[(0,n._)("th",null,"Nom"),(0,n._)("th",null,"Adresse loge"),(0,n._)("th",null,"Code"),(0,n._)("th",null,"Horaire")],-1))),C=c((()=>(0,n._)("tr",null,[(0,n._)("th",null,"Fixe"),(0,n._)("th",null,"Portable")],-1))),U={class:"form_bloc_content table_container"},F=c((()=>(0,n._)("div",{class:"form_bloc_title"},"Syndic / Gérant",-1))),k={class:"recur_table"},G=c((()=>(0,n._)("tr",null,[(0,n._)("th",null,"Nom"),(0,n._)("th",null,"Fixe")],-1))),E={class:"form_bloc_content table_container"},z=c((()=>(0,n._)("div",{class:"form_bloc_title"},"Observations GERECO",-1))),q={class:"form_bloc_content"},N={class:"form_bloc"},j=c((()=>(0,n._)("div",{class:"form_bloc_title"},"Remarques (informations à modifier)",-1))),A={class:"form_bloc_content"},S={class:"form_bloc vg"},L={class:"form_bloc_title"},T={class:"form_bloc_content table_container"},R=c((()=>(0,n._)("tr",null,[(0,n._)("th",null,"N°"),(0,n._)("th",null,"Bât."),(0,n._)("th",null,"Esc."),(0,n._)("th",null,"Et."),(0,n._)("th",null,"Porte"),(0,n._)("th",null,"Suivi"),(0,n._)("th",null,"Modifier")],-1))),O=["onUpdate:modelValue","onInput"],P=["onUpdate:modelValue","onInput"],B=["onUpdate:modelValue","onInput"],Z=["onUpdate:modelValue","onInput"],M=["onUpdate:modelValue","onChange"],W=(0,n.uE)('<option value="Occupant" data-v-8cc935c2>Occupant</option><option value="Abs." data-v-8cc935c2>Abs.</option><option value="Abs. x2" data-v-8cc935c2>Abs. x2</option><option value="Gardien" data-v-8cc935c2>Gardien</option><option value="CLE" data-v-8cc935c2>CLE</option><option value="RO" data-v-8cc935c2>RO</option><option value="Avisé" data-v-8cc935c2>Avisé</option>',7),H=[W],$={style:{"text-align":"center"}},Y=["onClick"],J={class:"form_bloc compteurs"},K=c((()=>(0,n._)("div",{class:"form_bloc_title"},"Compteurs",-1))),Q={class:"form_bloc_content table_container"},X={class:"liste_vg"},tt=c((()=>(0,n._)("tr",null,[(0,n._)("th",null,"Num"),(0,n._)("th",null,"Type"),(0,n._)("th",null,"Date"),(0,n._)("th",null,"Loc."),(0,n._)("th",null,"Index")],-1))),et=["onUpdate:modelValue","onInput"],at=["onUpdate:modelValue","onInput"],nt=["onUpdate:modelValue","onInput"],ot=["onUpdate:modelValue","onInput"],lt=["onUpdate:modelValue","onInput"],it=["onClick"],st={class:"form_bloc"},rt=c((()=>(0,n._)("label",{style:{"font-weight":"bold"}},"Compte-rendu: ",-1))),ut=c((()=>(0,n._)("br",null,null,-1))),ct={style:{"margin-bottom":"20px"}},dt=c((()=>(0,n._)("label",null,"Temps passé (hors déplacement)* :",-1))),_t=(0,n.uE)('<option value="1" data-v-8cc935c2>1 jours</option><option value="2" data-v-8cc935c2>2 jours</option><option value="3" data-v-8cc935c2>3 jours</option><option value="4" data-v-8cc935c2>4 jours</option><option value="5" data-v-8cc935c2>5 jours</option><option value="6" data-v-8cc935c2>6 jours</option><option value="7" data-v-8cc935c2>7 jours</option><option value="8" data-v-8cc935c2>8 jours</option><option value="9" data-v-8cc935c2>9 jours</option><option value="10" data-v-8cc935c2>10 jours</option><option value="11" data-v-8cc935c2>11 jours</option><option value="12" data-v-8cc935c2>12 jours</option><option value="13" data-v-8cc935c2>13 jours</option><option value="14" data-v-8cc935c2>14 jours</option>',14),pt=[_t],mt=c((()=>(0,n._)("label",{style:{"font-weight":"bold"}},"Visa Gardien ou Représentant",-1))),vt=c((()=>(0,n._)("input",{class:"input_button",type:"submit",value:"TERMINER L'INTERVENTION"},null,-1)));function ht(t,e,a,o,l,r){const u=(0,n.up)("router-link"),c=(0,n.up)("VueSignaturePad");return(0,n.wg)(),(0,n.iD)("form",{onSubmit:e[12]||(e[12]=(0,i.iM)(((...t)=>r.submitForm&&r.submitForm(...t)),["prevent"]))},[(0,n._)("div",d,[_,(0,n._)("div",p,(0,s.zw)(l.resp.Evt_dtDebut),1),(0,n._)("div",m,[v,(0,n._)("div",h,[b,(0,n._)("div",g,[(0,n.Uk)((0,s.zw)(l.resp.Imm_1_adr),1),w,(0,n.Uk)(" "+(0,s.zw)(l.resp.Imm_2_adr),1)])]),(0,n._)("div",f,[(0,n._)("div",null,[(0,n._)("table",null,[y,(0,n._)("tr",null,[(0,n._)("td",null,(0,s.zw)(l.resp.Imm_nbLog),1),(0,n._)("td",null,(0,s.zw)(l.resp.Imm_nbCham),1),(0,n._)("td",null,(0,s.zw)(l.resp.Imm_nbWC),1),(0,n._)("td",null,(0,s.zw)(l.resp.Imm_nbLocComm),1)])])])]),(0,n._)("div",I,[x,(0,n._)("div",V,[(0,n._)("table",null,[D,(0,n._)("tr",null,[(0,n._)("td",null,(0,s.zw)(l.resp.gardien_nom),1),(0,n._)("td",null,(0,s.zw)(l.resp.gardien_adresse),1),(0,n._)("td",null,(0,s.zw)(l.resp.gardien_code),1),(0,n._)("td",null,(0,s.zw)(l.resp.gardien_HeuresLoge),1)])]),(0,n._)("table",null,[C,(0,n._)("tr",null,[(0,n._)("td",null,(0,s.zw)(l.resp.gardien_telephone),1),(0,n._)("td",null,(0,s.zw)(l.resp.gardien_mobile),1)])])]),(0,n._)("div",U,[F,(0,n._)("div",k,[(0,n._)("table",null,[G,(0,n._)("tr",null,[(0,n._)("td",null,(0,s.zw)(l.resp.client_raisonSoc),1),(0,n._)("td",null,(0,s.zw)(l.resp.client_tel1),1)])])])]),(0,n._)("div",E,[z,(0,n._)("div",q,[(0,n.wy)((0,n._)("textarea",{disabled:"","onUpdate:modelValue":e[0]||(e[0]=t=>l.resp.VG_remarqueTech=t),onInput:e[1]||(e[1]=e=>r.saveFormData(t.index)),style:{height:"70px"}},null,544),[[i.nr,l.resp.VG_remarqueTech]])])]),(0,n._)("div",N,[j,(0,n._)("div",A,[(0,n.wy)((0,n._)("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.remarque=t),onInput:e[3]||(e[3]=e=>r.saveFormData(t.index))},null,544),[[i.nr,l.remarque]])])])])])]),(0,n._)("div",S,[(0,n._)("div",L,[(0,n.Uk)("Appartements "),(0,n._)("div",{class:"filter_button",onClick:e[4]||(e[4]=t=>l.isShowGreen=!l.isShowGreen)},"Filtrer")]),(0,n._)("div",T,[(0,n._)("div",null,[(0,n._)("table",null,[R,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.appartements,((t,e)=>((0,n.wg)(),(0,n.iD)("tr",{key:e,class:(0,s.C_)({green:"Abs."!=t.suivi&&""!=t.suivi,invis:"Abs."!=t.suivi&&""!=t.suivi&&!l.isShowGreen})},[(0,n._)("td",null,(0,s.zw)(t.num),1),(0,n._)("td",null,[(0,n.wy)((0,n._)("input",{style:{width:"25px"},type:"text","onUpdate:modelValue":e=>t.bat=e,onInput:t=>r.saveFormData(e)},null,40,O),[[i.nr,t.bat]])]),(0,n._)("td",null,[(0,n.wy)((0,n._)("input",{style:{width:"25px"},type:"text","onUpdate:modelValue":e=>t.escalier=e,onInput:t=>r.saveFormData(e)},null,40,P),[[i.nr,t.escalier]])]),(0,n._)("td",null,[(0,n.wy)((0,n._)("input",{style:{width:"25px"},type:"text","onUpdate:modelValue":e=>t.etage=e,onInput:t=>r.saveFormData(e)},null,40,B),[[i.nr,t.etage]])]),(0,n._)("td",null,[(0,n.wy)((0,n._)("input",{style:{width:"25px"},type:"text","onUpdate:modelValue":e=>t.porte=e,onInput:t=>r.saveFormData(e)},null,40,Z),[[i.nr,t.porte]])]),(0,n._)("td",null,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":e=>t.suivi=e,onChange:t=>r.saveFormData(e),id:"suivi"},H,40,M),[[i.bM,t.suivi]])]),(0,n._)("td",$,[this.vg_id?((0,n.wg)(),(0,n.j4)(u,{key:0,to:{name:"VGInter",params:{id:l.vg_id},query:{vgocc:e+1}}},{default:(0,n.w5)((()=>[(0,n.Uk)("--\x3e")])),_:2},1032,["to"])):(0,n.kq)("",!0)]),(0,n._)("div",{onClick:t=>r.removeLine(e),class:"line_remover"}," x ",8,Y)],2)))),128))]),(0,n._)("div",{onClick:e[5]||(e[5]=(...t)=>r.addItemAppartements&&r.addItemAppartements(...t)),class:"line_adder"},"+")])])]),(0,n._)("div",J,[K,(0,n._)("div",Q,[(0,n._)("div",null,[(0,n._)("table",X,[tt,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.compteurs,((t,e)=>((0,n.wg)(),(0,n.iD)("tr",{key:e,class:"vg-line"},[(0,n._)("td",null,[(0,n.wy)((0,n._)("input",{style:{width:"70px"},type:"text","onUpdate:modelValue":e=>t.numero=e,onInput:t=>r.saveFormData(e)},null,40,et),[[i.nr,t.numero]])]),(0,n._)("td",null,[(0,n.wy)((0,n._)("input",{style:{width:"28px"},type:"text","onUpdate:modelValue":e=>t.type=e,onInput:t=>r.saveFormData(e)},null,40,at),[[i.nr,t.type]])]),(0,n._)("td",null,[(0,n.wy)((0,n._)("input",{style:{width:"60px"},type:"text","onUpdate:modelValue":e=>t.date=e,onInput:t=>r.saveFormData(e)},null,40,nt),[[i.nr,t.date]])]),(0,n._)("td",null,[(0,n.wy)((0,n._)("textarea",{style:{width:"40px"},"onUpdate:modelValue":e=>t.localisation=e,onInput:t=>r.saveFormData(e)},null,40,ot),[[i.nr,t.localisation]])]),(0,n._)("td",null,[(0,n.wy)((0,n._)("input",{style:{width:"34px"},type:"text","onUpdate:modelValue":e=>t.index=e,onInput:t=>r.saveFormData(e)},null,40,lt),[[i.nr,t.index]])]),(0,n._)("div",{onClick:t=>r.removeCompteur(e),class:"line_remover"}," x ",8,it)])))),128))]),(0,n._)("div",{onClick:e[6]||(e[6]=(...t)=>r.addItemCompteurs&&r.addItemCompteurs(...t)),class:"line_adder"},"+")])])]),(0,n._)("div",st,[(0,n._)("p",null,[rt,ut,(0,n.wy)((0,n._)("textarea",{"onUpdate:modelValue":e[7]||(e[7]=t=>this.compte_rendu=t),onInput:e[8]||(e[8]=e=>r.saveFormData(t.index))},null,544),[[i.nr,this.compte_rendu]])]),(0,n._)("div",ct,[dt,(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>this.temps_passe=t),onChange:e[10]||(e[10]=e=>r.saveFormData(t.index))},pt,544),[[i.bM,this.temps_passe]])]),mt,(0,n._)("div",null,[(0,n.Wm)(c,{class:"signaturePad",ref:"signaturePad"},null,512),(0,n._)("div",null,[(0,n._)("button",{onClick:e[11]||(e[11]=(...t)=>r.undo&&r.undo(...t))},"Effacer")])])]),vt],32)}a(7658);var bt=a(9262),gt=a(4311),wt={name:"IDBTest",data(){return{isShowGreen:!0,currIp:this.currIp,resp:"",vg_id:"",compte_rendu:"",remarque:"",temps_passe:"",inter_option:[],compteurs:[],appartements:[{num:"1",nom:"",bat:"",escalier:"",etage:"",porte:"",suivi:"",remarque_inter:"",statut:"",checkbox_devis:!1,remarque:"",inter:[{inter_type:"",inter_lieu:"",inter_presta:"",inter_qty:"1"}],verif_ra:!1,verif_rob:!1,verif_wc:!1,verif_gen:!1}]}},mounted(){let t=window.location.href.split("?"),e=t[1].split("&"),a={},n="";e.forEach((function(t){n=t.split("="),2==n.length&&(a[n[0]]=n[1])}));let o=a["item_id"];this.vg_id=o,gt.Z.get(this.currIp+"/mission_vg?item_id="+o).then((t=>{this.resp=t.data,gt.Z.get(this.currIp+"/get_contrat_presta?ctr_id="+this.resp.Ctr_code).then((t=>{this.inter_option=t.data,this.getFormData()})),gt.Z.get(this.currIp+"/get_compteurs?ctr_id="+this.resp.Ctr_code).then((t=>{console.log(t.data);for(let e of t.data)this.compteurs.push({numero:e.Cpt_numero,type:e.Cpt_nature,date:"",index:"",localisation:e.Cpt_localisation,new:!1});this.getFormData()}))})),window.addEventListener("beforeunload",this.saveFormData)},beforeUnmount(){window.removeEventListener("beforeunload",this.saveFormData)},methods:{undo(){this.$refs.signaturePad.undoSignature()},save(){const{isEmpty:t,data:e}=this.$refs.signaturePad.saveSignature();console.log(t),console.log(e)},async saveFormData(t){t+=1;var e=this.$data,a=JSON.stringify(e);if(a=JSON.parse(a),isNaN(t)){let t=1;while(await(0,bt.U2)("VG-"+this.vg_id+"-"+t))await(0,bt.IV)("VG-"+this.vg_id+"-"+t),t+=1;t=1;while(a.appartements[t-1])await(0,bt.t8)("VG-"+this.vg_id+"-"+t,a.appartements[t-1]),t+=1}else await(0,bt.t8)("VG-"+this.vg_id+"-"+t,a.appartements[t-1]);await(0,bt.t8)("VG-"+this.vg_id,a)},async getFormData(){let t=1,e=[];if(void 0!==await(0,bt.U2)("VG-"+this.vg_id+"-"+t)){while(void 0!==await(0,bt.U2)("VG-"+this.vg_id+"-"+t)){let a=await(0,bt.U2)("VG-"+this.vg_id+"-"+t);e[t-1]=a,t+=1}this.appartements=e}if(void 0!==await(0,bt.U2)("VG-"+this.vg_id)){let t=await(0,bt.U2)("VG-"+this.vg_id);this.compte_rendu=t.compte_rendu,this.temps_passe=t.temps_passe,this.remarque=t.remarque}this.saveFormData()},addItemAppartements(){var t=this.appartements[this.appartements.length-1],e=t.num;this.appartements.push({num:Number(e)+1,bat:t.bat,nom:"",escalier:t.escalier,etage:t.etage,porte:"",suivi:"",remarque_inter:"",checkbox_cloture:!1,checkbox_suspens:!1,checkbox_devis:!1,remarque:"",inter:[{inter_type:"",inter_lieu:"",inter_presta:"",inter_qty:"1"}],verif_ra:!1,verif_rob:!1,verif_wc:!1,verif_gen:!1}),this.saveFormData()},addItemCompteurs(){this.compteurs.push({numero:"",type:"",date:"",index:"",localisation:"",new:!0}),this.saveFormData()},removeItem(t,e){this["inter_"+e].splice(t,1),this.saveFormData()},removeLine(t){confirm("Voulez-vous supprimer cette ligne ?")&&(this.appartements.splice(t,1),this.saveFormData())},removeCompteur(t){confirm("Voulez-vous supprimer cette ligne ?")&&(this.compteurs.splice(t,1),this.saveFormData())},submitForm(){const t={appartements:this.appartements,compteurs:this.compteurs,temps_passe:this.temps_passe,compte_rendu:this.compte_rendu,vg_id:this.vg_id,remarque:this.remarque,ctr_code:this.resp.Ctr_code,ctr_nature:this.resp.Ctr_nature};console.log(t),gt.Z.post(this.currIp+"/submit_vg",t).then((t=>{console.log(t.data)})),this.$router.push("/")}}},ft=a(89);const yt=(0,ft.Z)(wt,[["render",ht],["__scopeId","data-v-8cc935c2"]]);var It=yt,xt={name:"IDBTestView",components:{IDBTest:It}};const Vt=(0,ft.Z)(xt,[["render",l]]);var Dt=Vt},3630:function(t,e,a){t.exports=a.p+"img/fleche2_blanc.dac177de.svg"},2957:function(t,e,a){t.exports=a.p+"img/logo-gereco-2.012b9603.svg"}}]);
//# sourceMappingURL=886.5a2e9144.js.map