"use strict";(self["webpackChunkwpa_gereco"]=self["webpackChunkwpa_gereco"]||[]).push([[810],{4810:function(t,e,a){a.r(e),a.d(e,{default:function(){return Tt}});var o=a(8473);const n={class:"IDBTest"};function i(t,e,a,i,s,l){const r=(0,o.up)("IDBTest");return(0,o.wg)(),(0,o.iD)("div",n,[(0,o.Wm)(r,{msg:"Welcome to Your Vue.js App"})])}var s=a(9197),l=a(4887),r=a(3630),u=a(2957);const p=t=>((0,o.dD)("data-v-108c717c"),t=t(),(0,o.Cn)(),t),d={class:"form_header"},c={class:"header_headline"},_=p((()=>(0,o._)("a",{href:"/"},[(0,o._)("img",{class:"return_button",src:r})],-1))),m=p((()=>(0,o._)("img",{src:u},null,-1))),v=p((()=>(0,o._)("h2",null,"RA",-1))),h=["value"],g=p((()=>(0,o._)("h2",null,"ROB",-1))),b=["value"],w=p((()=>(0,o._)("h2",null,"WC",-1))),f=["value"],y=p((()=>(0,o._)("h2",null,"Parties communes",-1))),x=["value"],I=p((()=>(0,o._)("div",{style:{"font-size":"19px",color:"white","font-weight":"bold"}},"VISITE GÉNÉRALE",-1))),D={style:{"font-size":"14px",color:"white","font-weight":"bold","margin-bottom":"20px"}},C={class:"form_bloc"},V=p((()=>(0,o._)("div",{class:"form_bloc_title"},"Contrat",-1))),k={class:"form_bloc_content"},U={class:"col"},F=p((()=>(0,o._)("div",{class:"form_bloc_subtitle"},"Référence",-1))),j={key:0},z={class:"col"},G=p((()=>(0,o._)("br",null,null,-1))),E=p((()=>(0,o._)("div",{class:"form_bloc_title"},"Code",-1))),A={class:"form_bloc_content"},S={class:"form_bloc_content table_container"},q=p((()=>(0,o._)("tr",null,[(0,o._)("th",null,"Nb Logt"),(0,o._)("th",null,"Nb Ch."),(0,o._)("th",null,"Nb WC comm."),(0,o._)("th",null,"Nb loc. comm.")],-1))),N={class:"form_bloc_content table_container"},L=p((()=>(0,o._)("div",{class:"form_bloc_title"},"Gardien",-1))),P={class:"recur_table"},R=p((()=>(0,o._)("tr",null,[(0,o._)("th",null,"Nom"),(0,o._)("th",null,"Adresse loge"),(0,o._)("th",null,"Horaire")],-1))),T=p((()=>(0,o._)("tr",null,[(0,o._)("th",null,"Fixe"),(0,o._)("th",null,"Portable")],-1))),O={class:"form_bloc_content table_container"},B=p((()=>(0,o._)("div",{class:"form_bloc_title"},"Syndic / Gérant",-1))),H={class:"recur_table"},Y=p((()=>(0,o._)("tr",null,[(0,o._)("th",null,"Nom"),(0,o._)("th",null,"Fixe")],-1))),Z={class:"form_bloc_content table_container"},K=p((()=>(0,o._)("div",{class:"form_bloc_title"},"Observations GERECO",-1))),M={class:"form_bloc_content"},W={class:"form_bloc"},$=p((()=>(0,o._)("div",{class:"form_bloc_title"},"Remarques (informations à modifier)",-1))),J={class:"form_bloc_content"},X={class:"form_bloc vg",style:{"margin-top":"40px"}},Q={class:"form_bloc_title"},tt={class:"form_bloc_content table_container"},et=p((()=>(0,o._)("tr",null,[(0,o._)("th",null,"N°"),(0,o._)("th",null,"Bât."),(0,o._)("th",null,"Esc."),(0,o._)("th",null,"Et."),(0,o._)("th",null,"Pte"),(0,o._)("th",null,"Suivi"),(0,o._)("th",null,"Modif")],-1))),at=["onUpdate:modelValue","onInput"],ot=["onUpdate:modelValue","onInput"],nt=["onUpdate:modelValue","onInput"],it=["onUpdate:modelValue","onInput"],st=["onUpdate:modelValue","onChange"],lt=(0,o.uE)('<option value="Occupant" data-v-108c717c>Occupant</option><option value="Abs." data-v-108c717c>Abs.</option><option value="Abs. x2" data-v-108c717c>Abs. x2</option><option value="Gardien" data-v-108c717c>Gardien</option><option value="CLE" data-v-108c717c>CLE</option><option value="RO" data-v-108c717c>RO</option><option value="Avisé" data-v-108c717c>Avisé</option>',7),rt=[lt],ut={style:{"text-align":"center"}},pt=["onClick"],dt=["disabled"],ct={class:"form_bloc compteurs",style:{"margin-top":"40px"}},_t=p((()=>(0,o._)("div",{class:"form_bloc_title"},"Compteurs",-1))),mt={class:"form_bloc_content table_container"},vt={class:"liste_vg"},ht=p((()=>(0,o._)("tr",null,[(0,o._)("th",null,"Num"),(0,o._)("th",null,"Type"),(0,o._)("th",null,"Date"),(0,o._)("th",null,"Loc."),(0,o._)("th",null,"Index")],-1))),gt=["onUpdate:modelValue","onInput"],bt=["onUpdate:modelValue","onInput"],wt=["onUpdate:modelValue","onInput"],ft=["onUpdate:modelValue","onInput"],yt=["onUpdate:modelValue","onInput","disabled"],xt=["onClick"],It={class:"form_bloc",style:{"margin-top":"40px"}},Dt=p((()=>(0,o._)("label",{style:{"font-weight":"bold"}},"Compte-rendu: ",-1))),Ct=p((()=>(0,o._)("br",null,null,-1))),Vt={style:{"margin-bottom":"20px"}},kt=p((()=>(0,o._)("label",null,"Temps passé (hors déplacement)* :",-1))),Ut=(0,o.uE)('<option value="0.25" data-v-108c717c>2 heures</option><option value="0.5" data-v-108c717c>0,5 jour</option><option value="1" data-v-108c717c>1 jour</option><option value="1.5" data-v-108c717c>1,5 jour</option><option value="2" data-v-108c717c>2 jours</option><option value="2.5" data-v-108c717c>2,5 jours</option><option value="3" data-v-108c717c>3 jours</option><option value="3.5" data-v-108c717c>3,5 jours</option><option value="4" data-v-108c717c>4 jours</option><option value="4.5" data-v-108c717c>4,5 jours</option><option value="5" data-v-108c717c>5 jours</option><option value="5.5" data-v-108c717c>5,5 jours</option><option value="6" data-v-108c717c>6 jours</option><option value="6.5" data-v-108c717c>6,5 jours</option><option value="7" data-v-108c717c>7 jours</option><option value="7.5" data-v-108c717c>7,5 jours</option><option value="8" data-v-108c717c>8 jours</option><option value="8.5" data-v-108c717c>8,5 jours</option><option value="9" data-v-108c717c>9 jours</option><option value="9.5" data-v-108c717c>9,5 jours</option><option value="10" data-v-108c717c>10 jours</option><option value="11" data-v-108c717c>11 jours</option><option value="12" data-v-108c717c>12 jours</option><option value="13" data-v-108c717c>13 jours</option><option value="14" data-v-108c717c>14 jours</option><option value="15" data-v-108c717c>15 jours</option><option value="16" data-v-108c717c>16 jours</option><option value="17" data-v-108c717c>17 jours</option><option value="18" data-v-108c717c>18 jours</option><option value="19" data-v-108c717c>19 jours</option><option value="20" data-v-108c717c>20 jours</option>',31),Ft=[Ut],jt=p((()=>(0,o._)("label",{style:{}},"Visa Gardien ou Représentant",-1))),zt=p((()=>(0,o._)("input",{class:"input_button",type:"submit",value:"FINALISER LA VISITE",style:{"margin-top":"20px"}},null,-1)));function Gt(t,e,a,n,i,r){const u=(0,o.up)("router-link"),p=(0,o.up)("VueSignaturePad");return(0,o.wg)(),(0,o.iD)("form",{onSubmit:e[15]||(e[15]=(0,s.iM)(((...t)=>r.submitForm&&r.submitForm(...t)),["prevent"]))},[(0,o._)("div",d,[(0,o._)("div",c,[_,m,(0,o._)("div",{style:{background:"white",padding:"2px",border:"1px solid black",position:"absolute",right:"20px",top:"20px"},onClick:e[0]||(e[0]=t=>i.isShowPresta=!0)},"Prestations"),(0,o._)("div",{style:{"padding-bottom":"20px",width:"100%",height:"600px","overflow-y":"scroll",background:"white",position:"absolute",top:"0px"},class:(0,l.C_)({invis:!i.isShowPresta})},[v,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.inter_option["presta_fam1"],(t=>((0,o.wg)(),(0,o.iD)("div",{key:t,value:t.id},(0,l.zw)(t.libelle),9,h)))),128)),g,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.inter_option["presta_fam3"],(t=>((0,o.wg)(),(0,o.iD)("div",{key:t,value:t.id},(0,l.zw)(t.libelle),9,b)))),128)),w,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.inter_option["presta_fam4"],(t=>((0,o.wg)(),(0,o.iD)("div",{key:t,value:t.id},(0,l.zw)(t.libelle),9,f)))),128)),y,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.inter_option["presta_fam5"],(t=>((0,o.wg)(),(0,o.iD)("div",{key:t,value:t.id},(0,l.zw)(t.libelle),9,x)))),128)),(0,o._)("div",{style:{background:"white",padding:"2px","font-size":"25px",position:"absolute",top:"25px",right:"25px"},onClick:e[1]||(e[1]=t=>i.isShowPresta=!1)},"X")],2)]),I,(0,o._)("div",D,(0,l.zw)(i.resp.Evt_dtDebut),1),(0,o._)("div",C,[V,(0,o._)("div",k,[(0,o._)("div",U,[F,(0,o._)("div",null,[(0,o.Uk)((0,l.zw)(i.resp.Evt_reference),1),"P"==i.resp.Ctr_nature||"B"==i.resp.Ctr_nature?((0,o.wg)(),(0,o.iD)("span",j," - Cubage")):(0,o.kq)("",!0)])]),(0,o._)("div",z,[(0,o.Uk)((0,l.zw)(i.resp.Imm_1_adr),1),G,(0,o.Uk)(" "+(0,l.zw)(i.resp.Imm_2_adr),1)])]),E,(0,o._)("div",A,[(0,o._)("div",null,(0,l.zw)(i.resp.gardien_code),1)]),(0,o._)("div",S,[(0,o._)("div",null,[(0,o._)("table",null,[q,(0,o._)("tr",null,[(0,o._)("td",null,(0,l.zw)(i.resp.Imm_nbLog),1),(0,o._)("td",null,(0,l.zw)(i.resp.Imm_nbCham),1),(0,o._)("td",null,(0,l.zw)(i.resp.Imm_nbWC),1),(0,o._)("td",null,(0,l.zw)(i.resp.Imm_nbLocComm),1)])])])]),(0,o._)("div",N,[L,(0,o._)("div",P,[(0,o._)("table",null,[R,(0,o._)("tr",null,[(0,o._)("td",null,(0,l.zw)(i.resp.gardien_nom),1),(0,o._)("td",null,(0,l.zw)(i.resp.gardien_adresse),1),(0,o._)("td",null,(0,l.zw)(i.resp.gardien_HeuresLoge),1)])]),(0,o._)("table",null,[T,(0,o._)("tr",null,[(0,o._)("td",null,(0,l.zw)(i.resp.gardien_telephone),1),(0,o._)("td",null,(0,l.zw)(i.resp.gardien_mobile),1)])])]),(0,o._)("div",O,[B,(0,o._)("div",H,[(0,o._)("table",null,[Y,(0,o._)("tr",null,[(0,o._)("td",null,(0,l.zw)(i.resp.client_raisonSoc),1),(0,o._)("td",null,(0,l.zw)(i.resp.client_tel1),1)])])])]),(0,o._)("div",Z,[K,(0,o._)("div",M,[(0,o.wy)((0,o._)("textarea",{disabled:"","onUpdate:modelValue":e[2]||(e[2]=t=>i.resp.VG_remarqueTech=t),onInput:e[3]||(e[3]=e=>r.saveFormData(t.index)),style:{height:"70px"}},null,544),[[s.nr,i.resp.VG_remarqueTech]])])]),(0,o._)("div",W,[$,(0,o._)("div",J,[(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":e[4]||(e[4]=t=>i.remarque=t),onInput:e[5]||(e[5]=e=>r.saveFormData(t.index))},null,544),[[s.nr,i.remarque]])])])])])]),(0,o._)("div",X,[(0,o._)("div",Q,[(0,o.Uk)("Appartements "),(0,o._)("div",{class:"filter_button",onClick:e[6]||(e[6]=t=>i.isShowGreen=!i.isShowGreen)},"Filtrer")]),(0,o._)("div",tt,[(0,o._)("div",null,[(0,o._)("div",{onClick:e[7]||(e[7]=(...t)=>r.addItemAppartements&&r.addItemAppartements(...t)),class:"line_adder",style:{"margin-bottom":"10px"}},"+"),(0,o._)("table",null,[et,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.appartements.slice().reverse(),((t,e)=>((0,o.wg)(),(0,o.iD)("tr",{key:e,class:(0,l.C_)({green:"Abs."!=t.suivi&&""!=t.suivi,invis:"Abs."!=t.suivi&&""!=t.suivi&&!i.isShowGreen})},[(0,o._)("td",null,(0,l.zw)(t.num),1),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{style:{width:"25px"},type:"text","onUpdate:modelValue":e=>t.bat=e,onInput:t=>r.saveFormData(e)},null,40,at),[[s.nr,t.bat]])]),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{style:{width:"25px"},type:"text","onUpdate:modelValue":e=>t.escalier=e,onInput:t=>r.saveFormData(e)},null,40,ot),[[s.nr,t.escalier]])]),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{style:{width:"25px"},type:"text","onUpdate:modelValue":e=>t.etage=e,onInput:t=>r.saveFormData(e)},null,40,nt),[[s.nr,t.etage]])]),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{style:{width:"25px"},type:"text","onUpdate:modelValue":e=>t.porte=e,onInput:t=>r.saveFormData(e)},null,40,it),[[s.nr,t.porte]])]),(0,o._)("td",null,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":e=>t.suivi=e,onChange:t=>r.saveFormData(e),id:"suivi"},rt,40,st),[[s.bM,t.suivi]])]),(0,o._)("td",ut,[this.vg_id&&"Abs."!=t.suivi&&"Abs. x2"!=t.suivi&&"RO"!=t.suivi&&"Avisé"!=t.suivi?((0,o.wg)(),(0,o.j4)(u,{key:0,to:{name:"VGInter",params:{id:i.vg_id},query:{vgocc:e+1}}},{default:(0,o.w5)((()=>[(0,o.Uk)("--\x3e")])),_:2},1032,["to"])):(0,o.kq)("",!0)]),(0,o._)("div",{onClick:t=>r.removeLine(e),class:"line_remover"}," x ",8,pt)],2)))),128))])])])]),(0,o._)("button",{class:"save_button",style:{"margin-top":"20px"},onClick:e[8]||(e[8]=(...t)=>r.enregistrer&&r.enregistrer(...t)),disabled:0==i.enregistrement_enable},"ENREGISTRER",8,dt),(0,o._)("div",null,"Dernier enregistrement : "+(0,l.zw)(i.date_enregistrement),1),(0,o._)("div",ct,[_t,(0,o._)("div",mt,[(0,o._)("div",null,[(0,o._)("table",vt,[ht,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.compteurs,((e,a)=>((0,o.wg)(),(0,o.iD)("tr",{key:a,class:"vg-line"},[(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{style:{width:"70px"},type:"text","onUpdate:modelValue":t=>e.numero=t,onInput:t=>r.saveFormData(a)},null,40,gt),[[s.nr,e.numero]])]),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{style:{width:"28px"},type:"text","onUpdate:modelValue":t=>e.type=t,onInput:t=>r.saveFormData(a)},null,40,bt),[[s.nr,e.type]])]),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{style:{width:"60px"},type:"date","onUpdate:modelValue":t=>e.date=t,onInput:t=>r.saveFormData(a)},null,40,wt),[[s.nr,e.date]])]),(0,o._)("td",null,[(0,o.wy)((0,o._)("textarea",{style:{width:"40px"},"onUpdate:modelValue":t=>e.localisation=t,onInput:t=>r.saveFormData(a)},null,40,ft),[[s.nr,e.localisation]])]),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{style:{width:"34px"},type:"text","onUpdate:modelValue":t=>e.index=t,onInput:t=>r.saveFormData(a),disabled:""!=e.date?t.disabled:""},null,40,yt),[[s.nr,e.index]])]),(0,o._)("div",{onClick:t=>r.removeCompteur(a),class:"line_remover"}," x ",8,xt)])))),128))]),(0,o._)("div",{onClick:e[9]||(e[9]=(...t)=>r.addItemCompteurs&&r.addItemCompteurs(...t)),class:"line_adder"},"+")])])]),(0,o._)("div",It,[(0,o._)("p",null,[Dt,Ct,(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":e[10]||(e[10]=t=>this.compte_rendu=t),onInput:e[11]||(e[11]=e=>r.saveFormData(t.index))},null,544),[[s.nr,this.compte_rendu]])]),(0,o._)("div",Vt,[kt,(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":e[12]||(e[12]=t=>this.temps_passe=t),onChange:e[13]||(e[13]=e=>r.saveFormData(t.index)),required:""},Ft,544),[[s.bM,this.temps_passe]])]),jt,(0,o._)("div",null,[(0,o.Wm)(p,{onChange:r.save,height:"200px",class:"signaturePad",style:{width:"70%",margin:"auto"},ref:"signaturePad",options:{onBegin:t.onBegin,onEnd:r.onEnd}},null,8,["onChange","options"]),(0,o._)("div",null,[(0,o._)("div",{onClick:e[14]||(e[14]=(...t)=>r.undo&&r.undo(...t))},"Effacer")])])]),zt],32)}a(7658);var Et=a(8736),At=a(5633),St={name:"IDBTest",data(){return{isShowGreen:!0,isShowPresta:!1,currIp:this.currIp,resp:"",vg_id:"",tech_id:"",date_enregistrement:"",enregistrement_enable:!0,compte_rendu:"",remarque:"",temps_passe:"",signature:{image:"",data_arr:{}},inter_option:[],compteurs:[],appartements:[{num:"1",bat:"",nom:"",escalier:"",etage:"",porte:"",suivi:"",signature:{image:"",data_arr:{}},remarque_inter:"",statut:"Clôturé",checkbox_devis:!1,remarque:"",inter:[{inter_type:"",inter_lieu:"",inter_presta:"",inter_qty:"1"}],verif_ra:!1,verif_rob:!1,verif_wc:!1,verif_gen:!1}]}},async mounted(){console.log("start");let t=window.location.href.split("?"),e=t[1].split("&"),a={},o="";e.forEach((function(t){o=t.split("="),2==o.length&&(a[o[0]]=o[1])}));let n=a["item_id"];this.vg_id=n;let i=await(0,Et.U2)("VG-"+this.vg_id),s=await(0,Et.U2)("current_tech");this.tech_id=s,void 0!==i&&void 0!==i["signature"]["data_arr"]&&Object.keys(i["signature"]["data_arr"]).length>0&&this.$refs.signaturePad.fromData(i["signature"]["data_arr"]),At.Z.get(this.currIp+"/mission_vg?item_id="+n).then((t=>{this.resp=t.data,At.Z.get(this.currIp+"/get_contrat_presta?ctr_id="+this.resp.Ctr_code).then((t=>{this.inter_option=t.data,this.getFormData()})),At.Z.get(this.currIp+"/get_compteurs?ctr_id="+this.resp.Ctr_code).then((t=>{let e=!1;for(let a of t.data){if(i){let t=i["compteurs"];if(0!=t.length)for(let o of t)o["id"]==a.Cpt_id&&(e=o)}0==!e?console.log("compteur dans le cache"):this.compteurs.push({id:a.Cpt_id,numero:a.Cpt_numero,type:a.Cpt_nature,date:"",index:"",localisation:a.Cpt_localisation,new:!1})}}))})),this.getFormData(),window.addEventListener("beforeunload",this.saveFormData)},beforeUnmount(){window.removeEventListener("beforeunload",this.saveFormData)},methods:{undo(){this.$refs.signaturePad.undoSignature(),this.save()},save(){const{data:t}=this.$refs.signaturePad.saveSignature();var e="";t&&(e=t.replace("data:","").replace(/^.+,/,""));const a=this.$refs.signaturePad.toData();this.signature.image=e,this.signature.data_arr=a,this.saveFormData()},onEnd(){this.save()},async saveFormData(t,e){var a=this.$data,o=JSON.stringify(a);if(o=JSON.parse(o),t+=1,!isNaN(t))if(e){let t=1;while(await(0,Et.U2)("VG-"+this.vg_id+"-"+t))void 0===o.appartements[t-1]&&await(0,Et.IV)("VG-"+this.vg_id+"-"+t),t+=1;t=1;while(o.appartements[t-1])await(0,Et.t8)("VG-"+this.vg_id+"-"+t,o.appartements[t-1]),t+=1}else t=o.appartements.length-t+1,console.log(t),await(0,Et.t8)("VG-"+this.vg_id+"-"+t,o.appartements[t-1]);await(0,Et.t8)("VG-"+this.vg_id,o)},async getFormData(){let t=1,e=[];if(void 0!==await(0,Et.U2)("VG-"+this.vg_id+"-"+t)){while(void 0!==await(0,Et.U2)("VG-"+this.vg_id+"-"+t)){let a=await(0,Et.U2)("VG-"+this.vg_id+"-"+t);e[t-1]=a,t+=1}this.appartements=e}if(void 0!==await(0,Et.U2)("VG-"+this.vg_id)){let t=await(0,Et.U2)("VG-"+this.vg_id);this.compte_rendu=t.compte_rendu,0==this.compteurs.length&&(this.compteurs=t.compteurs),this.signature=t.signature,this.temps_passe=t.temps_passe,this.date_enregistrement=t.date_enregistrement,this.remarque=t.remarque}this.saveFormData()},addItemAppartements(){var t=this.appartements[this.appartements.length-1],e=t.num;this.appartements.push({num:Number(e)+1,bat:t.bat,nom:"",escalier:t.escalier,etage:t.etage,porte:"",suivi:"",signature:{image:"",data_arr:{}},remarque_inter:"",statut:"Clôturé",checkbox_devis:!1,remarque:"",inter:[{inter_type:"",inter_lieu:"",inter_presta:"",inter_qty:"1"}],verif_ra:!1,verif_rob:!1,verif_wc:!1,verif_gen:!1}),this.saveFormData(0,!1)},addItemCompteurs(){this.compteurs.push({numero:"",type:"",date:"",index:"",localisation:"",new:!0}),this.saveFormData()},removeItem(t,e){this["inter_"+e].splice(t,1),this.saveFormData()},removeLine(t){if(confirm("Voulez-vous supprimer cette ligne ?")){let e=this.appartements.length-t-1;this.appartements.splice(e,1),this.saveFormData(t,!0)}},removeCompteur(t){confirm("Voulez-vous supprimer cette ligne ?")&&(this.compteurs.splice(t,1),this.saveFormData())},async enregistrer(){this.enregistrement_enable=!1,console.log("enregistrement disable");const t={appartements:this.appartements,compteurs:[],compte_rendu:this.compte_rendu,vg_id:this.vg_id,remarque:this.remarque,ctr_code:this.resp.Ctr_code,ctr_nature:this.resp.Ctr_nature,signature:this.signature};console.log(t);var e=new Date,a=e.getDate(),o=e.getMonth()+1,n=e.getFullYear(),i=e.getHours(),s=e.getMinutes();a<10&&(a="0"+a),o<10&&(o="0"+o),s<10&&(s="0"+s),e=a+"-"+o+"-"+n+" "+i+":"+s,await At.Z.post(this.currIp+"/submit_vg",t).then((t=>{console.log(t.data),200==t.status&&(this.date_enregistrement=e,this.saveFormData()),this.enregistrement_enable=!0,console.log("enregistrement enable")}))},submitForm(){for(var t=0;t<this.compteurs.length;t++)if(""!==this.compteurs[t].date){var e=this.compteurs[t].date.match(/\d+/g),a=e[2]+"/"+e[1]+"/"+e[0];this.compteurs[t].date=a}const o={appartements:this.appartements,compteurs:this.compteurs,temps_passe:this.temps_passe,compte_rendu:this.compte_rendu,vg_id:this.vg_id,remarque:this.remarque,ctr_code:this.resp.Ctr_code,ctr_nature:this.resp.Ctr_nature,signature:this.signature,tech_id:this.tech_id};console.log(o),confirm("FINALISER LA VISITE. Vous allez envoyer les données au siège, vous ne pourrez plus accéder à cette VG.")&&At.Z.post(this.currIp+"/submit_vg",o).then((t=>{console.log(t.data),200==t.status&&this.$router.push("/")}))}}},qt=a(5312);const Nt=(0,qt.Z)(St,[["render",Gt],["__scopeId","data-v-108c717c"]]);var Lt=Nt,Pt={name:"IDBTestView",components:{IDBTest:Lt}};const Rt=(0,qt.Z)(Pt,[["render",i]]);var Tt=Rt},3630:function(t,e,a){t.exports=a.p+"img/fleche2_blanc.dac177de.svg"},2957:function(t,e,a){t.exports=a.p+"img/logo-gereco-2.012b9603.svg"}}]);
//# sourceMappingURL=810.ae07d3d3.js.map